<?xml version="1.0" standalone="no"?>
<!DOCTYPE entity PUBLIC "-//UC Berkeley//DTD MoML 1//EN"
    "http://ptolemy.eecs.berkeley.edu/xml/dtd/MoML_1.dtd">
<entity name="TestExpression" class="ptolemy.actor.TypedCompositeActor">
    <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[597, 693]">
    </property>
    <property name="_vergilLocation" class="ptolemy.actor.gui.LocationAttribute" value="[232, 107]">
    </property>
    <property name="SDF" class="ptolemy.domains.sdf.kernel.SDFDirector">
        <property name="Scheduler" class="ptolemy.domains.sdf.kernel.SDFScheduler">
        </property>
        <property name="iterations" class="ptolemy.data.expr.Parameter" value="3">
        </property>
        <property name="vectorizationFactor" class="ptolemy.data.expr.Parameter" value="1">
        </property>
        <property name="_location" class="ptolemy.moml.Location" value="78.0, 147.0">
        </property>
    </property>
    <property name="annotation" class="ptolemy.kernel.util.Attribute">
        <property name="_iconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure><svg><text x="20" y="20" style="font-size:14; font-family:SansSerif; fill:blue">Matlab Expression Actor Demo

Similar to TestEngine. It could be made more interesting
by using more complex matrix functions from a library and
testing against matlab...</text></svg></configure>
        </property>
        <property name="_controllerFactory" class="ptolemy.vergil.ptolemy.kernel.NodeControllerFactory">
        </property>
        <property name="_editorFactory" class="ptolemy.vergil.toolbox.AnnotationEditorFactory">
        </property>
        <property name="_location" class="ptolemy.moml.Location" value="211.0, 53.0">
        </property>
    </property>
    <entity name="DoubleMatrixMatlabExpression" class="ptolemy.matlab.Expression">
        <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="output=input.*input;">
        </property>
        <property name="_location" class="ptolemy.moml.Location" value="261.0, 294.0">
        </property>
        <port name="output" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="type" class="ptolemy.data.expr.Parameter" value="[0.0]">
            </property>
        </port>
        <port name="input" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="type" class="ptolemy.data.expr.Parameter" value="[0.0]">
            </property>
        </port>
    </entity>
    <entity name="ComplexMatrixMatlabExpression" class="ptolemy.matlab.Expression">
        <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="output=input*i">
        </property>
        <property name="_location" class="ptolemy.moml.Location" value="345.0, 440.0">
        </property>
        <port name="output" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="type" class="ptolemy.data.expr.Parameter" value="[0+0i]">
            </property>
        </port>
        <port name="input" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
        </port>
    </entity>
    <entity name="DoubleMatrixSource" class="ptolemy.actor.lib.Pulse">
        <property name="firingCountLimit" class="ptolemy.data.expr.Parameter" value="0">
        </property>
        <property name="indexes" class="ptolemy.data.expr.Parameter" value="{0, 1,2}">
        </property>
        <property name="values" class="ptolemy.data.expr.Parameter" value="{[1.0],[1.0,2,3],[1.0,2,3;4,5,6]}">
        </property>
        <property name="repeat" class="ptolemy.data.expr.Parameter" value="false">
        </property>
        <property name="_location" class="ptolemy.moml.Location" value="85.0, 256.0">
        </property>
        <port name="output" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
        </port>
        <port name="trigger" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="multiport"/>
        </port>
    </entity>
    <entity name="DoubleMatrixExpression" class="ptolemy.actor.lib.Expression">
        <property name="expression" class="ptolemy.data.expr.Parameter" value="input*2.0">
        </property>
        <property name="_location" class="ptolemy.moml.Location" value="244.0, 227.0">
        </property>
        <port name="output" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="type" class="ptolemy.data.expr.Parameter" value="[0.0]">
            </property>
        </port>
        <port name="input" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="type" class="ptolemy.data.expr.Parameter" value="[0.0]">
            </property>
        </port>
    </entity>
    <entity name="ComplexMatrixExpression" class="ptolemy.actor.lib.Expression">
        <property name="expression" class="ptolemy.data.expr.Parameter" value="input * i">
        </property>
        <property name="_location" class="ptolemy.moml.Location" value="325.0, 362.0">
        </property>
        <port name="output" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="type" class="ptolemy.data.expr.Parameter" value="[0+0i]">
            </property>
        </port>
        <port name="input" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
        </port>
    </entity>
    <entity name="RecordSource" class="ptolemy.actor.lib.Pulse">
        <property name="firingCountLimit" class="ptolemy.data.expr.Parameter" value="0">
        </property>
        <property name="indexes" class="ptolemy.data.expr.Parameter" value="{0,1,2}">
        </property>
        <property name="values" class="ptolemy.data.expr.Parameter" value="{{x=1.0,y=[2.0,3.0],r={a=0.0}},{x=2.0,y=[4.0,5.0],r={a=0.0}},{x=3.0,y=[6.0,7.0],r={a=0.0}}}">
        </property>
        <property name="repeat" class="ptolemy.data.expr.Parameter" value="false">
        </property>
        <property name="_location" class="ptolemy.moml.Location" value="67.0, 500.0">
        </property>
        <port name="output" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="type" class="ptolemy.data.expr.Parameter" value="{x=0.0}">
            </property>
        </port>
        <port name="trigger" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="multiport"/>
        </port>
    </entity>
    <entity name="MatlabStructWriteRead" class="ptolemy.matlab.Expression">
        <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="output=input;">
        </property>
        <property name="_location" class="ptolemy.moml.Location" value="227.0, 563.0">
        </property>
        <port name="output" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="type" class="ptolemy.data.expr.Parameter" value="{x=0.0}">
            </property>
        </port>
        <port name="input" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
        </port>
    </entity>
    <entity name="CompareRecords" class="ptolemy.actor.lib.Expression">
        <property name="expression" class="ptolemy.data.expr.Parameter" value="reference.isEqualTo(test)">
        </property>
        <property name="_location" class="ptolemy.moml.Location" value="334.0, 507.0">
        </property>
        <port name="output" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="type" class="ptolemy.actor.TypeAttribute" value="boolean">
            </property>
        </port>
        <port name="reference" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
        </port>
        <port name="test" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
        </port>
    </entity>
    <entity name="Test1" class="ptolemy.actor.lib.Test">
        <property name="correctValues" class="ptolemy.data.expr.Parameter" value="{true}">
        </property>
        <property name="tolerance" class="ptolemy.data.expr.Parameter" value="1.0E-9">
        </property>
        <property name="_location" class="ptolemy.moml.Location" value="469.0, 506.0">
        </property>
        <port name="input" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="multiport"/>
        </port>
    </entity>
    <entity name="Pulse" class="ptolemy.actor.lib.Pulse">
        <property name="firingCountLimit" class="ptolemy.data.expr.Parameter" value="0">
        </property>
        <property name="indexes" class="ptolemy.data.expr.Parameter" value="{0, 1}">
        </property>
        <property name="values" class="ptolemy.data.expr.Parameter" value="{1, 0}">
        </property>
        <property name="repeat" class="ptolemy.data.expr.Parameter" value="false">
        </property>
        <property name="_location" class="ptolemy.moml.Location" value="52.0, 375.0">
        </property>
        <port name="output" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
        </port>
        <port name="trigger" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="multiport"/>
        </port>
    </entity>
    <entity name="CheckPackageDirectories" class="ptolemy.matlab.Expression">
        <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="output=path;">
        </property>
        <property name="_location" class="ptolemy.moml.Location" value="235.0, 650.0">
        </property>
        <property name="packageDirectories" class="ptolemy.data.expr.Parameter" value="&quot;../ml,ptolemy/matlab/test&quot;">
        </property>
        <port name="output" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="type" class="ptolemy.actor.TypeAttribute" value="string">
            </property>
        </port>
        <port name="input" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
        </port>
    </entity>
    <entity name="Display" class="ptolemy.actor.lib.gui.Display">
        <property name="rowsDisplayed" class="ptolemy.data.expr.Parameter" value="10">
        </property>
        <property name="columnsDisplayed" class="ptolemy.data.expr.Parameter" value="40">
        </property>
        <property name="title" class="ptolemy.kernel.util.StringAttribute">
        </property>
        <property name="_location" class="ptolemy.moml.Location" value="536.0, 406.0">
        </property>
        <port name="input" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="multiport"/>
        </port>
    </entity>
    <entity name="ComplexMatrixSource" class="ptolemy.actor.lib.Pulse">
        <property name="firingCountLimit" class="ptolemy.data.expr.Parameter" value="0">
        </property>
        <property name="indexes" class="ptolemy.data.expr.Parameter" value="{0, 1,2}">
        </property>
        <property name="values" class="ptolemy.data.expr.Parameter" value="{[1+0i],[1,2+i,3i],[1i,2,3i;4,5i,6]}">
        </property>
        <property name="repeat" class="ptolemy.data.expr.Parameter" value="false">
        </property>
        <property name="_location" class="ptolemy.moml.Location" value="189.0, 374.0">
        </property>
        <port name="output" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
        </port>
        <port name="trigger" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="multiport"/>
        </port>
    </entity>
    <entity name="MarkIteration" class="ptolemy.actor.lib.Expression">
        <property name="expression" class="ptolemy.data.expr.Parameter" value="&quot;Iteration &quot;+iteration.toString()+&quot;:&quot;">
        </property>
        <property name="_location" class="ptolemy.moml.Location" value="217.0, 154.0">
        </property>
        <port name="output" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="type" class="ptolemy.actor.TypeAttribute" value="string">
            </property>
        </port>
    </entity>
    <relation name="relation" class="ptolemy.actor.TypedIORelation">
        <vertex name="vertex1" class="ptolemy.moml.Vertex" value="131.0, 261.0">
        </vertex>
    </relation>
    <relation name="relation4" class="ptolemy.actor.TypedIORelation">
        <vertex name="vertex1" class="ptolemy.moml.Vertex" value="212.0, 380.0">
        </vertex>
    </relation>
    <relation name="relation8" class="ptolemy.actor.TypedIORelation">
        <vertex name="vertex1" class="ptolemy.moml.Vertex" value="147.0, 505.0">
        </vertex>
    </relation>
    <relation name="relation10" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation13" class="ptolemy.actor.TypedIORelation">
        <vertex name="vertex1" class="ptolemy.moml.Vertex" value="104.0, 380.0">
        </vertex>
    </relation>
    <relation name="relation11" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation12" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation14" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation15" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation16" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation18" class="ptolemy.actor.TypedIORelation">
        <vertex name="vertex1" class="ptolemy.moml.Vertex" value="251.0, 521.0">
        </vertex>
    </relation>
    <relation name="relation19" class="ptolemy.actor.TypedIORelation">
    </relation>
    <link port="DoubleMatrixMatlabExpression.output" relation="relation14"/>
    <link port="DoubleMatrixMatlabExpression.input" relation="relation"/>
    <link port="ComplexMatrixMatlabExpression.output" relation="relation16"/>
    <link port="ComplexMatrixMatlabExpression.input" relation="relation4"/>
    <link port="DoubleMatrixSource.output" relation="relation"/>
    <link port="DoubleMatrixSource.trigger" relation="relation13"/>
    <link port="DoubleMatrixExpression.output" relation="relation12"/>
    <link port="DoubleMatrixExpression.input" relation="relation"/>
    <link port="ComplexMatrixExpression.output" relation="relation15"/>
    <link port="ComplexMatrixExpression.input" relation="relation4"/>
    <link port="RecordSource.output" relation="relation8"/>
    <link port="RecordSource.trigger" relation="relation13"/>
    <link port="MatlabStructWriteRead.output" relation="relation18"/>
    <link port="MatlabStructWriteRead.input" relation="relation8"/>
    <link port="CompareRecords.output" relation="relation10"/>
    <link port="CompareRecords.reference" relation="relation8"/>
    <link port="CompareRecords.test" relation="relation18"/>
    <link port="Test1.input" relation="relation10"/>
    <link port="Pulse.output" relation="relation13"/>
    <link port="CheckPackageDirectories.output" relation="relation19"/>
    <link port="CheckPackageDirectories.input" relation="relation13"/>
    <link port="Display.input" relation="relation11"/>
    <link port="Display.input" relation="relation12"/>
    <link port="Display.input" relation="relation14"/>
    <link port="Display.input" relation="relation15"/>
    <link port="Display.input" relation="relation16"/>
    <link port="Display.input" relation="relation8"/>
    <link port="Display.input" relation="relation18"/>
    <link port="Display.input" relation="relation19"/>
    <link port="ComplexMatrixSource.output" relation="relation4"/>
    <link port="ComplexMatrixSource.trigger" relation="relation13"/>
    <link port="MarkIteration.output" relation="relation11"/>
</entity>
