<?xml version="1.0" standalone="no"?>
<!DOCTYPE model PUBLIC "-//UC Berkeley//DTD MoML 1//EN"
    "http://ptolemy.eecs.berkeley.edu/xml/dtd/moml.dtd">
<model name="modulation" class="ptolemy.actor.TypedCompositeActor">
  <doc>Multiply a low-frequency sine wave (the signal)
by a higher frequency one (the carrier).</doc>
  <property name="frequency1" value="PI*0.2"
      class="ptolemy.data.expr.Parameter">
      <doc>Frequency of the carrier</doc>
  </property>
  <property name="frequency2" value="PI*0.02"
      class="ptolemy.data.expr.Parameter">
      <doc>Frequency of the sinusoidal signal</doc>
  </property>
  <director class="ptolemy.domains.sdf.kernel.SDFDirector">
    <property name="iterations" value="100">
        <doc>Number of iterations in an execution.</doc>
    </property>
  </director>

  <import source="sinewave.xml"/>

  <!-- Define the actors -->
  <entity name="carrier" class=".sinewave">
    <property name="samplingFrequency" value="2*PI"></property>
    <property name="frequency" value="frequency1"></property>
    <port name="output"></port>
  </entity>

  <entity name="signal" class=".sinewave">
    <property name="samplingFrequency" value="2*PI"></property>
    <property name="frequency" value="frequency2"></property>
    <port name="output"></port>
  </entity>

  <entity name="mult" class="ptolemy.actor.lib.MultiplyDivide">
    <port name="multiply"></port>
    <port name="output"></port>
  </entity>
  <entity name="display" class="ptolemy.actor.gui.SequencePlotter">
    <port name="input"></port>
    <!-- Configure provided in both a referenced file and local data -->
    <configure source="plotConfigure.xml"><![CDATA[
      <?xml version="1.0" standalone="no"?>
      <!DOCTYPE model PUBLIC "-//UC Berkeley//DTD PlotML 1//EN"
           "http://ptolemy.eecs.berkeley.edu/xml/dtd/plotml.dtd">
      <plot>
        <size width="450" height="300"/>
        <title>Modulated Waveform Example</title>
      </plot>
    ]]></configure>
  </entity>

  <!-- Make the connections -->
  <relation name="r1" class="ptolemy.actor.TypedIORelation"></relation>
  <link port="carrier.output" relation="r1"/>
  <link port="mult.multiply" relation="r1"/>

  <relation name="r2" class="ptolemy.actor.TypedIORelation"></relation>
  <link port="signal.output" relation="r2"/>
  <link port="mult.multiply" relation="r2"/>
  <link port="display.input" relation="r2"/>

  <relation name="r3" class="ptolemy.actor.TypedIORelation"></relation>
  <link port="mult.output" relation="r3"/>
  <link port="display.input" relation="r3"/>
</model>