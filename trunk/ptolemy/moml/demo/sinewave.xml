<?xml version="1.0" standalone="no"?>
<!DOCTYPE class SYSTEM "../moml.dtd">
<class name="sinewave" extends="ptolemy.actor.TypedCompositeActor">
    <doc>
    This composite actor generates a sine wave.
    </doc>
    <property name="samplingFrequency"
               value="8000.0"
               class="ptolemy.data.expr.Parameter">
      <doc>The sampling frequency, in the same units as the frequency.</doc>
    </property>
    <property name="frequency"
               value="440.0"
               class="ptolemy.data.expr.Parameter">
      <doc>
      The frequency of the sinusoid, in the same units as the
      sampling frequency.
      </doc>
    </property>
    <property name="phase"
               value="0.0"
               class="ptolemy.data.expr.Parameter">
      <doc>The phase, in radians.</doc>
    </property>

    <!-- Define the actors. -->
    <entity name="ramp" class="ptolemy.actor.lib.Ramp">
      <property name="step"
                 value="frequency*2*PI/samplingFrequency">
      </property>
      <property name="init" value="phase"></property>
      <port name="output"></port>
    </entity>
    <entity name="sine" class="ptolemy.actor.lib.Sine">
      <port name="input"></port>
      <port name="output"></port>
    </entity>

    <!-- Define the ports. -->
    <port name="output" direction="output" class="ptolemy.actor.TypedIOPort">
      <doc>Sinusoidal waveform output.</doc>
    </port>

    <!-- Make the connections -->
    <relation name="r1" class="ptolemy.actor.TypedIORelation"></relation>
    <link port="ramp.output" relation="r1"/>
    <link port="sine.input" relation="r1"/>

    <relation name="r2" class="ptolemy.actor.TypedIORelation"></relation>
    <link port="sine.output" relation="r2"/>
    <link port="output" relation="r2"/>
</class>