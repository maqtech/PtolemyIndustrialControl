<?xml version="1.0" standalone="no"?>
<!DOCTYPE entity PUBLIC "-//UC Berkeley//DTD MoML 1//EN"
    "http://ptolemy.eecs.berkeley.edu/xml/dtd/MoML_1.dtd">
<entity name="Router" class="ptolemy.actor.TypedCompositeActor">
    <property name="_createdBy" class="ptolemy.kernel.attributes.VersionAttribute" value="2.1-devel-2">
    </property>
    <property name="DE Director" class="ptolemy.domains.de.kernel.DEDirector">
        <property name="startTime" class="ptolemy.data.expr.Parameter" value="0.0">
        </property>
        <property name="stopTime" class="ptolemy.data.expr.Parameter" value="1.797693135E308">
        </property>
        <property name="stopWhenQueueIsEmpty" class="ptolemy.data.expr.Parameter" value="true">
        </property>
        <property name="synchronizeToRealTime" class="ptolemy.data.expr.Parameter" value="true">
        </property>
        <property name="isCQAdaptive" class="ptolemy.data.expr.Parameter" value="true">
        </property>
        <property name="minBinCount" class="ptolemy.data.expr.Parameter" value="2">
        </property>
        <property name="binCountFactor" class="ptolemy.data.expr.Parameter" value="2">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="81.0, 41.0">
        </property>
    </property>
    <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[604, 454]">
    </property>
    <property name="_vergilLocation" class="ptolemy.actor.gui.LocationAttribute" value="[102, 100]">
    </property>
    <property name="0:0:annotation1" class="ptolemy.kernel.util.Attribute">
        <property name="_location" class="ptolemy.kernel.util.Location" value="180.0, 0.0">
        </property>
        <property name="_iconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure>
           <svg>
           <text x="20" style="font-size:14; font-family:sanserif; fill:blue" y="20">This model illustrates composite types in Ptolemy II.
The Record Assembler actor composes a string with an
integer into a record token, which is then passed through
a channel that has random delay.  The tokens arrive
possibly in another order.  The Record Disassembler
actor separates the string from the sequence number.
The strings are displayed as received (possible out
of order), and resequenced by the Sequencer actor,
which puts them back in order.  This example demonstrates
how types propagate through record composition and
decomposition.</text>
           </svg>
           </configure>
        </property>
        <property name="_hideName" class="ptolemy.data.expr.Parameter">
        </property>
    </property>
    <property name="1:0:0:0:annotation1" class="ptolemy.kernel.util.Attribute">
        <property name="_location" class="ptolemy.kernel.util.Location" value="230.0, 375.0">
        </property>
        <property name="_iconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure>
           <svg>
           <text x="20" style="font-size:12; font-family:sanserif; fill:black" y="20">The channel is modeled
by a variable delay, which
here is random, with a
Rayleigh distribution.</text>
           </svg>
           </configure>
        </property>
        <property name="_hideName" class="ptolemy.data.expr.Parameter">
        </property>
    </property>
    <entity name="Record Assembler" class="ptolemy.actor.lib.RecordAssembler">
        <property name="_location" class="ptolemy.kernel.util.Location" value="240.0, 260.0">
        </property>
        <port name="output" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
        </port>
        <port name="content" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
        </port>
        <port name="sequence number" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
        </port>
    </entity>
    <entity name="Sequence Count" class="ptolemy.actor.lib.Ramp">
        <property name="firingCountLimit" class="ptolemy.data.expr.Parameter" value="0">
        </property>
        <property name="init" class="ptolemy.data.expr.Parameter" value="0">
        </property>
        <property name="step" class="ptolemy.data.expr.Parameter" value="1">
        </property>
        <doc>Create a sequence of tokens with increasing value</doc>
        <property name="_location" class="ptolemy.kernel.util.Location" value="150.0, 290.0">
        </property>
        <port name="output" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
        </port>
        <port name="trigger" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="multiport"/>
        </port>
    </entity>
    <entity name="Channel Model" class="ptolemy.domains.de.lib.VariableDelay">
        <property name="defaultDelay" class="ptolemy.data.expr.Parameter" value="1.0">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="315.0, 270.0">
        </property>
        <port name="input" class="ptolemy.domains.de.kernel.DEIOPort">
            <property name="input"/>
        </port>
        <port name="output" class="ptolemy.domains.de.kernel.DEIOPort">
            <property name="output"/>
        </port>
        <port name="delay" class="ptolemy.domains.de.kernel.DEIOPort">
            <property name="input"/>
        </port>
    </entity>
    <entity name="Gaussian" class="ptolemy.actor.lib.Gaussian">
        <property name="seed" class="ptolemy.data.expr.Parameter" value="0">
        </property>
        <property name="mean" class="ptolemy.data.expr.Parameter" value="0.0">
        </property>
        <property name="standardDeviation" class="ptolemy.data.expr.Parameter" value="0.3">
        </property>
        <doc>Create a sequence of gaussian random variables</doc>
        <property name="_location" class="ptolemy.kernel.util.Location" value="90.0, 350.0">
        </property>
        <port name="output" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
        </port>
        <port name="trigger" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="multiport"/>
        </port>
    </entity>
    <entity name="Square" class="ptolemy.actor.lib.MathFunction">
        <property name="function" class="ptolemy.kernel.util.StringAttribute" value="square">
            <property name="style" class="ptolemy.actor.gui.style.ChoiceStyle">
                <property name="exp" class="ptolemy.kernel.util.StringAttribute" value="exp">
                </property>
                <property name="log" class="ptolemy.kernel.util.StringAttribute" value="log">
                </property>
                <property name="modulo" class="ptolemy.kernel.util.StringAttribute" value="modulo">
                </property>
                <property name="sign" class="ptolemy.kernel.util.StringAttribute" value="sign">
                </property>
                <property name="square" class="ptolemy.kernel.util.StringAttribute" value="square">
                </property>
                <property name="sqrt" class="ptolemy.kernel.util.StringAttribute" value="sqrt">
                </property>
            </property>
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="200.0, 350.0">
        </property>
        <property name="_icon" class="ptolemy.vergil.icon.AttributeValueIcon">
            <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="function">
            </property>
            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="6">
            </property>
        </property>
        <port name="firstOperand" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
        </port>
        <port name="output" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
        </port>
    </entity>
    <entity name="Master Clock" class="ptolemy.actor.lib.Clock">
        <property name="stopTime" class="ptolemy.data.expr.Parameter" value="0.0">
        </property>
        <property name="period" class="ptolemy.data.expr.Parameter" value="0.5">
        </property>
        <property name="offsets" class="ptolemy.data.expr.Parameter" value="{0.0, 0.25}">
        </property>
        <property name="values" class="ptolemy.data.expr.Parameter" value="{1, 0}">
        </property>
        <doc>Create a generalized square wave</doc>
        <property name="_location" class="ptolemy.kernel.util.Location" value="40.0, 230.0">
        </property>
        <port name="output" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
        </port>
        <port name="trigger" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="multiport"/>
        </port>
    </entity>
    <entity name="String Sequence" class="ptolemy.actor.lib.Pulse">
        <property name="firingCountLimit" class="ptolemy.data.expr.Parameter" value="0">
        </property>
        <property name="indexes" class="ptolemy.data.expr.Parameter" value="{0, 1, 2, 3}">
        </property>
        <property name="values" class="ptolemy.data.expr.Parameter" value="{&quot;Ptolemy&quot;, &quot;is&quot;, &quot;great&quot;, &quot;&quot;}">
        </property>
        <property name="repeat" class="ptolemy.data.expr.Parameter" value="true">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="150.0, 230.0">
        </property>
        <port name="output" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
        </port>
        <port name="trigger" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="multiport"/>
        </port>
    </entity>
    <entity name="Record Disassembler" class="ptolemy.actor.lib.RecordDisassembler">
        <property name="_location" class="ptolemy.kernel.util.Location" value="385.0, 270.0">
        </property>
        <port name="input" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
        </port>
        <port name="content" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
        </port>
        <port name="sequence number" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
        </port>
    </entity>
    <entity name="Sequencer" class="ptolemy.actor.lib.Sequencer">
        <property name="startingSequenceNumber" class="ptolemy.data.expr.Parameter" value="0">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="465.0, 405.0">
        </property>
        <port name="input" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
        </port>
        <port name="output" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
        </port>
        <port name="sequenceNumber" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
        </port>
    </entity>
    <entity name="Display As Received" class="ptolemy.actor.lib.gui.Display">
        <property name="rowsDisplayed" class="ptolemy.data.expr.Parameter" value="10">
        </property>
        <property name="columnsDisplayed" class="ptolemy.data.expr.Parameter" value="40">
        </property>
        <property name="title" class="ptolemy.kernel.util.StringAttribute" value="As Received">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="500.0, 270.0">
        </property>
        <port name="input" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="multiport"/>
        </port>
    </entity>
    <entity name="Display Resequenced" class="ptolemy.actor.lib.gui.Display">
        <property name="rowsDisplayed" class="ptolemy.data.expr.Parameter" value="10">
        </property>
        <property name="columnsDisplayed" class="ptolemy.data.expr.Parameter" value="40">
        </property>
        <property name="title" class="ptolemy.kernel.util.StringAttribute" value="Resequenced">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="500.0, 325.0">
        </property>
        <port name="input" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="multiport"/>
        </port>
    </entity>
    <relation name="relation6" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation43" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation44" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation45" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation3" class="ptolemy.actor.TypedIORelation">
        <vertex name="vertex1" class="ptolemy.moml.Vertex" value="95.0, 230.0">
        </vertex>
    </relation>
    <relation name="relation1" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation4" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation2" class="ptolemy.actor.TypedIORelation">
        <vertex name="vertex1" class="ptolemy.moml.Vertex" value="425.0, 260.0">
        </vertex>
    </relation>
    <relation name="relation7" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation5" class="ptolemy.actor.TypedIORelation">
    </relation>
    <link port="Record Assembler.output" relation="relation45"/>
    <link port="Record Assembler.content" relation="relation1"/>
    <link port="Record Assembler.sequence number" relation="relation6"/>
    <link port="Sequence Count.output" relation="relation6"/>
    <link port="Sequence Count.trigger" relation="relation3"/>
    <link port="Channel Model.input" relation="relation45"/>
    <link port="Channel Model.output" relation="relation4"/>
    <link port="Channel Model.delay" relation="relation44"/>
    <link port="Gaussian.output" relation="relation43"/>
    <link port="Gaussian.trigger" relation="relation3"/>
    <link port="Square.firstOperand" relation="relation43"/>
    <link port="Square.output" relation="relation44"/>
    <link port="Master Clock.output" relation="relation3"/>
    <link port="String Sequence.output" relation="relation1"/>
    <link port="String Sequence.trigger" relation="relation3"/>
    <link port="Record Disassembler.input" relation="relation4"/>
    <link port="Record Disassembler.content" relation="relation2"/>
    <link port="Record Disassembler.sequence number" relation="relation7"/>
    <link port="Sequencer.input" relation="relation2"/>
    <link port="Sequencer.output" relation="relation5"/>
    <link port="Sequencer.sequenceNumber" relation="relation7"/>
    <link port="Display As Received.input" relation="relation2"/>
    <link port="Display Resequenced.input" relation="relation5"/>
</entity>
