<?xml version="1.0" standalone="no"?>
<!DOCTYPE class PUBLIC "-//UC Berkeley//DTD MoML 1//EN"
    "http://ptolemy.eecs.berkeley.edu/xml/dtd/MoML_1.dtd">
<class name="SendComponent" extends="ptolemy.domains.fsm.kernel.FSMActor">
    <property name="initialStateName" class="ptolemy.kernel.util.StringAttribute" value="S0">
    </property>
    <property name="trying" class="ptolemy.data.expr.Parameter" value="true">
    </property>
    <property name="msg" class="ptolemy.data.expr.Parameter" value="13">
    </property>
    <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[604, 454]">
    </property>
    <property name="_vergilLocation" class="ptolemy.actor.gui.LocationAttribute" value="[102, 116]">
    </property>
    <port name="msgIn" class="ptolemy.actor.TypedIOPort">
        <property name="input"/>
        <property name="type" class="ptolemy.actor.TypeAttribute" value="int">
        </property>
        <property name="_location" class="ptolemy.moml.Location" value="35.5, 46.25">
        </property>
    </port>
    <port name="next" class="ptolemy.actor.TypedIOPort">
        <property name="output"/>
        <property name="type" class="ptolemy.actor.TypeAttribute" value="general">
        </property>
        <property name="_location" class="ptolemy.moml.Location" value="525.0, 125.75">
        </property>
    </port>
    <port name="ack" class="ptolemy.actor.TypedIOPort">
        <property name="input"/>
        <property name="type" class="ptolemy.actor.TypeAttribute" value="int">
        </property>
        <property name="_location" class="ptolemy.moml.Location" value="31.0, 99.25">
        </property>
    </port>
    <port name="pktOut" class="ptolemy.actor.TypedIOPort">
        <property name="output"/>
        <property name="type" class="ptolemy.actor.TypeAttribute" value="int">
        </property>
        <property name="_location" class="ptolemy.moml.Location" value="532.0, 26.25">
        </property>
    </port>
    <port name="setTimer" class="ptolemy.actor.TypedIOPort">
        <property name="output"/>
        <property name="type" class="ptolemy.actor.TypeAttribute" value="double">
        </property>
        <property name="_location" class="ptolemy.moml.Location" value="538.0, 77.25">
        </property>
    </port>
    <port name="expired" class="ptolemy.actor.TypedIOPort">
        <property name="input"/>
        <property name="type" class="ptolemy.actor.TypeAttribute" value="general">
        </property>
        <property name="_location" class="ptolemy.moml.Location" value="40.0, 150.25">
        </property>
    </port>
    <port name="monitor" class="ptolemy.actor.TypedIOPort">
        <property name="output"/>
        <property name="type" class="ptolemy.actor.TypeAttribute" value="int">
        </property>
        <property name="_location" class="ptolemy.moml.Location" value="535.0, 169.25">
        </property>
    </port>
    <entity name="S0" class="ptolemy.domains.fsm.kernel.State">
        <property name="refinementName" class="ptolemy.kernel.util.StringAttribute">
        </property>
        <property name="_location" class="ptolemy.moml.Location" value="137.0, 74.0">
        </property>
        <port name="incomingPort" class="ptolemy.kernel.ComponentPort">
        </port>
        <port name="outgoingPort" class="ptolemy.kernel.ComponentPort">
        </port>
    </entity>
    <entity name="S1" class="ptolemy.domains.fsm.kernel.State">
        <property name="refinementName" class="ptolemy.kernel.util.StringAttribute">
        </property>
        <property name="_location" class="ptolemy.moml.Location" value="408.0, 66.5">
        </property>
        <port name="incomingPort" class="ptolemy.kernel.ComponentPort">
        </port>
        <port name="outgoingPort" class="ptolemy.kernel.ComponentPort">
        </port>
    </entity>
    <relation name="sendTr1" class="ptolemy.domains.fsm.kernel.Transition">
        <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="msgIn_isPresent">
        </property>
        <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
        </property>
        <property name="triggerExpression" class="ptolemy.kernel.util.StringAttribute">
        </property>
        <property name="actions" class="ptolemy.domains.fsm.kernel.CommitActionsAttribute">
        </property>
        <property name="sendTr1Act1" class="ptolemy.domains.fsm.kernel.BroadcastOutput">
            <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="msgIn*2">
            </property>
            <property name="portName" class="ptolemy.kernel.util.StringAttribute" value="pktOut">
            </property>
        </property>
        <property name="sendTr1Act2" class="ptolemy.domains.fsm.kernel.BroadcastOutput">
            <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="0">
            </property>
            <property name="portName" class="ptolemy.kernel.util.StringAttribute" value="monitor">
            </property>
        </property>
        <property name="sendTr1Act3" class="ptolemy.domains.fsm.kernel.BroadcastOutput">
            <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="5.0">
            </property>
            <property name="portName" class="ptolemy.kernel.util.StringAttribute" value="setTimer">
            </property>
        </property>
        <property name="sendTr1Act4" class="ptolemy.domains.fsm.kernel.SetVariable">
            <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="true">
            </property>
            <property name="variableName" class="ptolemy.kernel.util.StringAttribute" value="trying">
            </property>
        </property>
        <property name="sendTr1Act5" class="ptolemy.domains.fsm.kernel.SetVariable">
            <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="msgIn">
            </property>
            <property name="variableName" class="ptolemy.kernel.util.StringAttribute" value="msg">
            </property>
        </property>
    </relation>
    <relation name="sendTr2" class="ptolemy.domains.fsm.kernel.Transition">
        <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="!ack_isPresent &amp;&amp; expired_isPresent &amp;&amp; trying">
        </property>
        <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
        </property>
        <property name="triggerExpression" class="ptolemy.kernel.util.StringAttribute">
        </property>
        <property name="actions" class="ptolemy.domains.fsm.kernel.CommitActionsAttribute">
        </property>
        <property name="sendTr2Act1" class="ptolemy.domains.fsm.kernel.BroadcastOutput">
            <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="msgIn*2">
            </property>
            <property name="portName" class="ptolemy.kernel.util.StringAttribute" value="pktOut">
            </property>
        </property>
        <property name="sendTr2Act2" class="ptolemy.domains.fsm.kernel.BroadcastOutput">
            <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="0">
            </property>
            <property name="portName" class="ptolemy.kernel.util.StringAttribute" value="monitor">
            </property>
        </property>
        <property name="sendTr2Act3" class="ptolemy.domains.fsm.kernel.BroadcastOutput">
            <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="5.0">
            </property>
            <property name="portName" class="ptolemy.kernel.util.StringAttribute" value="setTimer">
            </property>
        </property>
    </relation>
    <relation name="sendTr3" class="ptolemy.domains.fsm.kernel.Transition">
        <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="(ack_isPresent ? ack : 0) != 0 &amp;&amp; expired_isPresent &amp;&amp; trying">
        </property>
        <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
        </property>
        <property name="triggerExpression" class="ptolemy.kernel.util.StringAttribute">
        </property>
        <property name="actions" class="ptolemy.domains.fsm.kernel.CommitActionsAttribute">
        </property>
        <property name="sendTr3Act1" class="ptolemy.domains.fsm.kernel.BroadcastOutput">
            <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="msgIn*2">
            </property>
            <property name="portName" class="ptolemy.kernel.util.StringAttribute" value="pktOut">
            </property>
        </property>
        <property name="sendTr3Act2" class="ptolemy.domains.fsm.kernel.BroadcastOutput">
            <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="0">
            </property>
            <property name="portName" class="ptolemy.kernel.util.StringAttribute" value="monitor">
            </property>
        </property>
        <property name="sendTr3Act3" class="ptolemy.domains.fsm.kernel.BroadcastOutput">
            <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="5.0">
            </property>
            <property name="portName" class="ptolemy.kernel.util.StringAttribute" value="setTimer">
            </property>
        </property>
    </relation>
    <relation name="sendTr4" class="ptolemy.domains.fsm.kernel.Transition">
        <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="(ack_isPresent ? ack : -1) == 0 &amp;&amp; trying">
        </property>
        <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
        </property>
        <property name="triggerExpression" class="ptolemy.kernel.util.StringAttribute">
        </property>
        <property name="actions" class="ptolemy.domains.fsm.kernel.CommitActionsAttribute">
        </property>
        <property name="sendTr4Act1" class="ptolemy.domains.fsm.kernel.BroadcastOutput">
            <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="-1.0">
            </property>
            <property name="portName" class="ptolemy.kernel.util.StringAttribute" value="setTimer">
            </property>
        </property>
        <property name="sendTr4Act2" class="ptolemy.domains.fsm.kernel.BroadcastOutput">
            <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="true">
            </property>
            <property name="portName" class="ptolemy.kernel.util.StringAttribute" value="next">
            </property>
        </property>
        <property name="sendTr4Act3" class="ptolemy.domains.fsm.kernel.SetVariable">
            <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="false">
            </property>
            <property name="variableName" class="ptolemy.kernel.util.StringAttribute" value="trying">
            </property>
        </property>
    </relation>
    <relation name="sendTr5" class="ptolemy.domains.fsm.kernel.Transition">
        <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="msgIn_isPresent">
        </property>
        <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
        </property>
        <property name="triggerExpression" class="ptolemy.kernel.util.StringAttribute">
        </property>
        <property name="actions" class="ptolemy.domains.fsm.kernel.CommitActionsAttribute">
        </property>
        <property name="sendTr5Act1" class="ptolemy.domains.fsm.kernel.BroadcastOutput">
            <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="msgIn*2+1">
            </property>
            <property name="portName" class="ptolemy.kernel.util.StringAttribute" value="pktOut">
            </property>
        </property>
        <property name="sendTr5Act2" class="ptolemy.domains.fsm.kernel.BroadcastOutput">
            <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="1">
            </property>
            <property name="portName" class="ptolemy.kernel.util.StringAttribute" value="monitor">
            </property>
        </property>
        <property name="sendTr5Act3" class="ptolemy.domains.fsm.kernel.BroadcastOutput">
            <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="5.0">
            </property>
            <property name="portName" class="ptolemy.kernel.util.StringAttribute" value="setTimer">
            </property>
        </property>
        <property name="sendTr5Act4" class="ptolemy.domains.fsm.kernel.SetVariable">
            <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="true">
            </property>
            <property name="variableName" class="ptolemy.kernel.util.StringAttribute" value="trying">
            </property>
        </property>
        <property name="sendTr5Act5" class="ptolemy.domains.fsm.kernel.SetVariable">
            <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="msgIn">
            </property>
            <property name="variableName" class="ptolemy.kernel.util.StringAttribute" value="msg">
            </property>
        </property>
    </relation>
    <relation name="sendTr6" class="ptolemy.domains.fsm.kernel.Transition">
        <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="!ack_isPresent &amp;&amp; expired_isPresent &amp;&amp; trying">
        </property>
        <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
        </property>
        <property name="triggerExpression" class="ptolemy.kernel.util.StringAttribute">
        </property>
        <property name="actions" class="ptolemy.domains.fsm.kernel.CommitActionsAttribute">
        </property>
        <property name="sendTr6Act1" class="ptolemy.domains.fsm.kernel.BroadcastOutput">
            <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="msgIn*2+1">
            </property>
            <property name="portName" class="ptolemy.kernel.util.StringAttribute" value="pktOut">
            </property>
        </property>
        <property name="sendTr6Act2" class="ptolemy.domains.fsm.kernel.BroadcastOutput">
            <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="1">
            </property>
            <property name="portName" class="ptolemy.kernel.util.StringAttribute" value="monitor">
            </property>
        </property>
        <property name="sendTr6Act3" class="ptolemy.domains.fsm.kernel.BroadcastOutput">
            <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="5.0">
            </property>
            <property name="portName" class="ptolemy.kernel.util.StringAttribute" value="setTimer">
            </property>
        </property>
    </relation>
    <relation name="sendTr7" class="ptolemy.domains.fsm.kernel.Transition">
        <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="(ack_isPresent ? ack : 1) != 1 &amp;&amp; expired_isPresent &amp;&amp; trying">
        </property>
        <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
        </property>
        <property name="triggerExpression" class="ptolemy.kernel.util.StringAttribute">
        </property>
        <property name="actions" class="ptolemy.domains.fsm.kernel.CommitActionsAttribute">
        </property>
        <property name="sendTr7Act1" class="ptolemy.domains.fsm.kernel.BroadcastOutput">
            <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="msgIn*2+1">
            </property>
            <property name="portName" class="ptolemy.kernel.util.StringAttribute" value="pktOut">
            </property>
        </property>
        <property name="sendTr7Act2" class="ptolemy.domains.fsm.kernel.BroadcastOutput">
            <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="1">
            </property>
            <property name="portName" class="ptolemy.kernel.util.StringAttribute" value="monitor">
            </property>
        </property>
        <property name="sendTr7Act3" class="ptolemy.domains.fsm.kernel.BroadcastOutput">
            <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="5.0">
            </property>
            <property name="portName" class="ptolemy.kernel.util.StringAttribute" value="setTimer">
            </property>
        </property>
    </relation>
    <relation name="sendTr8" class="ptolemy.domains.fsm.kernel.Transition">
        <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="(ack_isPresent ? ack : -1) == 1 &amp;&amp; trying">
        </property>
        <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
        </property>
        <property name="triggerExpression" class="ptolemy.kernel.util.StringAttribute">
        </property>
        <property name="actions" class="ptolemy.domains.fsm.kernel.CommitActionsAttribute">
        </property>
        <property name="sendTr8Act1" class="ptolemy.domains.fsm.kernel.BroadcastOutput">
            <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="-1.0">
            </property>
            <property name="portName" class="ptolemy.kernel.util.StringAttribute" value="setTimer">
            </property>
        </property>
        <property name="sendTr8Act2" class="ptolemy.domains.fsm.kernel.BroadcastOutput">
            <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="true">
            </property>
            <property name="portName" class="ptolemy.kernel.util.StringAttribute" value="next">
            </property>
        </property>
        <property name="sendTr8Act3" class="ptolemy.domains.fsm.kernel.SetVariable">
            <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="false">
            </property>
            <property name="variableName" class="ptolemy.kernel.util.StringAttribute" value="trying">
            </property>
        </property>
    </relation>
    <link port="S0.incomingPort" relation="sendTr1"/>
    <link port="S0.incomingPort" relation="sendTr2"/>
    <link port="S0.incomingPort" relation="sendTr3"/>
    <link port="S0.incomingPort" relation="sendTr8"/>
    <link port="S0.outgoingPort" relation="sendTr1"/>
    <link port="S0.outgoingPort" relation="sendTr2"/>
    <link port="S0.outgoingPort" relation="sendTr3"/>
    <link port="S0.outgoingPort" relation="sendTr4"/>
    <link port="S1.incomingPort" relation="sendTr4"/>
    <link port="S1.incomingPort" relation="sendTr5"/>
    <link port="S1.incomingPort" relation="sendTr6"/>
    <link port="S1.incomingPort" relation="sendTr7"/>
    <link port="S1.outgoingPort" relation="sendTr5"/>
    <link port="S1.outgoingPort" relation="sendTr6"/>
    <link port="S1.outgoingPort" relation="sendTr7"/>
    <link port="S1.outgoingPort" relation="sendTr8"/>
</class>
