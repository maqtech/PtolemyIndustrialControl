<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE DNHA SYSTEM "HSIF.dtd">

<DNHA name="SwimmingPool">
	<HybridAutomaton name="switch">
		<DiscreteState _id="id3" dst="id4 ide" src="id4 ide" name="empty" initialState="false"/>
		<BooleanVariable kind="Controlled" name="toggle" defaultValue="false"/>
	    <RealVariable kind="Input" name="level" maxValue="0.000000" minValue="0.000000" initialMaxValue="0.000000" initialMinValue="0.000000"/>
		<Transition _id="id4" dst_end_="id3" src_end_="id3">
			<UpdateAction>
				<Var ix="1" name="toggle" unOp="NOP"/>
				<Expr>
					<LExpr ix="3">
						<RExpr ix="4">
							<AExpr ix="5">
								<MExpr ix="6">
									<Const ix="7" unOp="NOP" value="0"/>
								</MExpr>
							</AExpr>
						</RExpr>
					</LExpr>
				</Expr>
			</UpdateAction>
			<SendAction _id="id76" dst="id75"/>
			<Expr>
				<LExpr ix="13">
					<RExpr ix="14">
						<AExpr ix="21">
							<MExpr ix="22">
								<Var ix="23" name="level" unOp="NOP"/>
							</MExpr>
						</AExpr>
					</RExpr>
					<RExpr ix="15">
						<AExpr ix="16">
							<MExpr ix="17">
								<Par ix="18" name="switchThreshold" unOp="NOP"/>
							</MExpr>
						</AExpr>
					</RExpr>
					<ROp ix="26" relOp=" > "/>
				</LExpr>
			</Expr>
		</Transition>
		<Transition _id="ide" dst_end_="id3" src_end_="id3">
			<UpdateAction>
				<Var ix="28" name="toggle" unOp="NOP"/>
				<Expr>
					<LExpr ix="30">
						<RExpr ix="31">
							<AExpr ix="32">
								<MExpr ix="33">
									<Const ix="34" unOp="NOP" value="1"/>
								</MExpr>
							</AExpr>
						</RExpr>
					</LExpr>
				</Expr>
			</UpdateAction>
			<SendAction _id="id77" dst="id75"/>
			<Expr>
				<LExpr ix="40">
					<RExpr ix="41">
						<AExpr ix="48">
							<MExpr ix="49">
								<Var ix="50" name="level" unOp="NOP"/>
							</MExpr>
						</AExpr>
					</RExpr>
					<RExpr ix="42">
						<AExpr ix="43">
							<MExpr ix="44">
								<Par ix="45" name="switchThreshold" unOp="NOP"/>
							</MExpr>
						</AExpr>
					</RExpr>
					<ROp ix="53" relOp=" &lt; "/>
				</LExpr>
			</Expr>
		</Transition>
	</HybridAutomaton>
	<HybridAutomaton name="pump">
	    <RealVariable kind="Controlled" name="level" maxValue="0.000000" minValue="0.000000" initialMaxValue="0.000000" initialMinValue="0.000000"/>
		<DiscreteState _id="id3d" dst="id4f id6b" src="id3c id59" name="steadyMode" initialState="true">
			<UpdateAction __child_as="exitAction">
				<Var ix="55" name="timer" unOp="NOP"/>
				<Expr>
					<LExpr ix="57">
						<RExpr ix="58">
							<AExpr ix="59">
								<MExpr ix="60">
									<Const ix="61" unOp="NOP" value="0"/>
								</MExpr>
							</AExpr>
						</RExpr>
					</LExpr>
				</Expr>
			</UpdateAction>
			<DiffEquation>
				<Var ix="67" name="level" unOp="NOP"/>
				<RExpr ix="68">
					<AExpr ix="69">
						<MExpr ix="70">
							<Var ix="71" name="rate" unOp="NOP"/>
						</MExpr>
					</AExpr>
				</RExpr>
			</DiffEquation>
			<DiffEquation>
				<Var ix="75" name="timer" unOp="NOP"/>
				<RExpr ix="76">
					<AExpr ix="77">
						<MExpr ix="78">
							<Const ix="79" unOp="NOP" value="1"/>
						</MExpr>
					</AExpr>
				</RExpr>
			</DiffEquation>
			<Expr>
				<LExpr ix="83">
					<RExpr ix="108">
						<AExpr ix="109">
							<MExpr ix="110">
								<ExprCall ix="111" unOp="NOP">
									<Expr>
										<LExpr ix="113">
											<RExpr ix="114">
												<AExpr ix="121">
													<MExpr ix="122">
														<Var ix="123" name="level" unOp="NOP"/>
													</MExpr>
												</AExpr>
											</RExpr>
											<RExpr ix="115">
												<AExpr ix="116">
													<MExpr ix="117">
														<Var ix="118" name="low" unOp="NOP"/>
													</MExpr>
												</AExpr>
											</RExpr>
											<ROp ix="126" relOp=" >= "/>
										</LExpr>
									</Expr>
								</ExprCall>
							</MExpr>
						</AExpr>
					</RExpr>
				</LExpr>
				<LExpr ix="84">
					<RExpr ix="85">
						<AExpr ix="86">
							<MExpr ix="87">
								<ExprCall ix="88" unOp="NOP">
									<Expr>
										<LExpr ix="90">
											<RExpr ix="91">
												<AExpr ix="98">
													<MExpr ix="99">
														<Var ix="100" name="level" unOp="NOP"/>
													</MExpr>
												</AExpr>
											</RExpr>
											<RExpr ix="92">
												<AExpr ix="93">
													<MExpr ix="94">
														<Var ix="95" name="high" unOp="NOP"/>
													</MExpr>
												</AExpr>
											</RExpr>
											<ROp ix="103" relOp=" &lt;= "/>
										</LExpr>
									</Expr>
								</ExprCall>
							</MExpr>
						</AExpr>
					</RExpr>
				</LExpr>
				<LExpr ix="84">
					<RExpr ix="85">
						<AExpr ix="86">
							<MExpr ix="87">
								<ExprCall ix="88" unOp="NOP">
									<Expr>
										<LExpr ix="90">
											<RExpr ix="91">
												<AExpr ix="98">
													<MExpr ix="99">
														<Var ix="100" name="level" unOp="NOP"/>
													</MExpr>
												</AExpr>
											</RExpr>
											<RExpr ix="92">
												<AExpr ix="93">
													<MExpr ix="94">
														<Var ix="95" name="high" unOp="NOP"/>
													</MExpr>
												</AExpr>
											</RExpr>
											<ROp ix="103" relOp=" &lt;= "/>
										</LExpr>
									</Expr>
								</ExprCall>
							</MExpr>
						</AExpr>
					</RExpr>
				</LExpr>
				<LOp ix="131" logicOp=" and "/>
				<LOp ix="131" logicOp=" and "/>
			</Expr>
		</DiscreteState>
		<DiscreteState _id="id3b" dst="id3c id59" src="id4f id6b" name="transientMode" initialState="false">
			<SendAction _id="id78" dst="id75" __child_as="entryAction"/>
			<DiffEquation>
				<Var ix="133" name="level" unOp="NOP"/>
				<RExpr ix="134">
					<AExpr ix="135">
						<MExpr ix="136">
							<Var ix="155" name="rate" unOp="NOP"/>
						</MExpr>
						<MExpr ix="137">
							<ExprCall ix="138" unOp="NOP">
								<Expr>
									<LExpr ix="140">
										<RExpr ix="141">
											<AExpr ix="142">
												<MExpr ix="149">
													<Const ix="150" unOp="NOP" value="1"/>
												</MExpr>
											</AExpr>
											<AExpr ix="143">
												<MExpr ix="144">
													<Var ix="147" name="timer" unOp="NOP"/>
												</MExpr>
												<MExpr ix="145">
													<Const ix="146" unOp="NOP" value="2"/>
												</MExpr>
												<MOp ix="148" mulOp=" / "/>
											</AExpr>
											<AOp ix="152" addOp=" - "/>
										</RExpr>
									</LExpr>
								</Expr>
							</ExprCall>
						</MExpr>
						<MOp ix="156" mulOp=" * "/>
					</AExpr>
				</RExpr>
			</DiffEquation>
			<DiffEquation>
				<Var ix="159" name="timer" unOp="NOP"/>
				<RExpr ix="160">
					<AExpr ix="161">
						<MExpr ix="162">
							<Const ix="163" unOp="NOP" value="1"/>
						</MExpr>
					</AExpr>
				</RExpr>
			</DiffEquation>
			<Expr>
				<LExpr ix="167">
					<RExpr ix="168">
						<AExpr ix="175">
							<MExpr ix="176">
								<Var ix="177" name="timer" unOp="NOP"/>
							</MExpr>
						</AExpr>
					</RExpr>
					<RExpr ix="169">
						<AExpr ix="170">
							<MExpr ix="171">
								<Const ix="172" unOp="NOP" value="2"/>
							</MExpr>
						</AExpr>
					</RExpr>
					<ROp ix="180" relOp=" &lt;= "/>
				</LExpr>
			</Expr>
		</DiscreteState>
		<IntegerVariable kind="Input" name="rate" maxValue="0" minValue="0" initialMaxValue="0" initialMinValue="0"/>
		<RealVariable kind="Controlled" name="timer" maxValue="10.000000" minValue="0.000000" initialMaxValue="0.000000" initialMinValue="0.000000"/>
		<IntegerVariable kind="Input" name="high" maxValue="10000000" minValue="0" initialMaxValue="0" initialMinValue="0"/>
		<IntegerVariable kind="Input" name="low" maxValue="10" minValue="0" initialMaxValue="0" initialMinValue="0"/>
		<Transition _id="id3c" dst_end_="id3d" src_end_="id3b">
			<UpdateAction>
				<Var ix="182" name="rate" unOp="NOP"/>
				<Expr>
					<LExpr ix="184">
						<RExpr ix="185">
							<AExpr ix="186">
								<MExpr ix="187">
									<Const ix="188" unOp=" -" value="2"/>
								</MExpr>
							</AExpr>
						</RExpr>
					</LExpr>
				</Expr>
			</UpdateAction>
			<UpdateAction>
				<Var ix="193" name="low" unOp="NOP"/>
				<Expr>
					<LExpr ix="195">
						<RExpr ix="196">
							<AExpr ix="197">
								<MExpr ix="198">
									<Par ix="199" name="pumpLow" unOp="NOP"/>
								</MExpr>
							</AExpr>
						</RExpr>
					</LExpr>
				</Expr>
			</UpdateAction>
			<UpdateAction>
				<Var ix="204" name="high" unOp="NOP"/>
				<Expr>
					<LExpr ix="206">
						<RExpr ix="207">
							<AExpr ix="208">
								<MExpr ix="209">
									<Par ix="210" name="INF" unOp="NOP"/>
								</MExpr>
							</AExpr>
						</RExpr>
					</LExpr>
				</Expr>
			</UpdateAction>
			<Expr>
				<LExpr ix="216">
					<RExpr ix="217">
						<AExpr ix="224">
							<MExpr ix="225">
								<Var ix="226" name="timer" unOp="NOP"/>
							</MExpr>
						</AExpr>
					</RExpr>
					<RExpr ix="218">
						<AExpr ix="219">
							<MExpr ix="220">
								<Const ix="221" unOp="NOP" value="2"/>
							</MExpr>
						</AExpr>
					</RExpr>
					<ROp ix="229" relOp=" >= "/>
				</LExpr>
			</Expr>
		</Transition>
		<Transition _id="id4f" dst_end_="id3b" src_end_="id3d">
			<UpdateAction>
				<Var ix="231" name="rate" unOp="NOP"/>
				<Expr>
					<LExpr ix="233">
						<RExpr ix="234">
							<AExpr ix="235">
								<MExpr ix="236">
									<Const ix="237" unOp="NOP" value="1"/>
								</MExpr>
							</AExpr>
						</RExpr>
					</LExpr>
				</Expr>
			</UpdateAction>
			<Expr>
				<LExpr ix="243">
					<RExpr ix="244">
						<AExpr ix="251">
							<MExpr ix="252">
								<Var ix="253" name="level" unOp="NOP"/>
							</MExpr>
						</AExpr>
					</RExpr>
					<RExpr ix="245">
						<AExpr ix="246">
							<MExpr ix="247">
								<Var ix="248" name="high" unOp="NOP"/>
							</MExpr>
						</AExpr>
					</RExpr>
					<ROp ix="256" relOp=" >= "/>
				</LExpr>
			</Expr>
		</Transition>
		<Transition _id="id59" dst_end_="id3d" src_end_="id3b">
			<UpdateAction>
				<Var ix="258" name="rate" unOp="NOP"/>
				<Expr>
					<LExpr ix="260">
						<RExpr ix="261">
							<AExpr ix="262">
								<MExpr ix="263">
									<Const ix="264" unOp="NOP" value="1"/>
								</MExpr>
							</AExpr>
						</RExpr>
					</LExpr>
				</Expr>
			</UpdateAction>
			<UpdateAction>
				<Var ix="269" name="low" unOp="NOP"/>
				<Expr>
					<LExpr ix="271">
						<RExpr ix="272">
							<AExpr ix="273">
								<MExpr ix="274">
									<Const ix="275" unOp="NOP" value="0"/>
								</MExpr>
							</AExpr>
						</RExpr>
					</LExpr>
				</Expr>
			</UpdateAction>
			<UpdateAction>
				<Var ix="280" name="high" unOp="NOP"/>
				<Expr>
					<LExpr ix="282">
						<RExpr ix="283">
							<AExpr ix="284">
								<MExpr ix="285">
									<Par ix="286" name="pumpHigh" unOp="NOP"/>
								</MExpr>
							</AExpr>
						</RExpr>
					</LExpr>
				</Expr>
			</UpdateAction>
			<Expr>
				<LExpr ix="292">
					<RExpr ix="293">
						<AExpr ix="300">
							<MExpr ix="301">
								<Var ix="302" name="timer" unOp="NOP"/>
							</MExpr>
						</AExpr>
					</RExpr>
					<RExpr ix="294">
						<AExpr ix="295">
							<MExpr ix="296">
								<Const ix="297" unOp="NOP" value="2"/>
							</MExpr>
						</AExpr>
					</RExpr>
					<ROp ix="305" relOp=" >= "/>
				</LExpr>
			</Expr>
		</Transition>
		<Transition _id="id6b" dst_end_="id3b" src_end_="id3d">
			<UpdateAction>
				<Var ix="307" name="rate" unOp="NOP"/>
				<Expr>
					<LExpr ix="309">
						<RExpr ix="310">
							<AExpr ix="311">
								<MExpr ix="312">
									<Const ix="313" unOp=" -" value="2"/>
								</MExpr>
							</AExpr>
						</RExpr>
					</LExpr>
				</Expr>
			</UpdateAction>
			<Expr>
				<LExpr ix="319">
					<RExpr ix="320">
						<AExpr ix="327">
							<MExpr ix="328">
								<Var ix="329" name="level" unOp="NOP"/>
							</MExpr>
						</AExpr>
					</RExpr>
					<RExpr ix="321">
						<AExpr ix="322">
							<MExpr ix="323">
								<Var ix="324" name="low" unOp="NOP"/>
							</MExpr>
						</AExpr>
					</RExpr>
					<ROp ix="332" relOp=" &lt;= "/>
				</LExpr>
			</Expr>
		</Transition>
	</HybridAutomaton>
	<Channel _id="id75" src="id76 id77 id78" name="toggleSwitch"/>
	<BooleanVariable kind="Controlled" name="swim" defaultValue="false"/>
	<IntegerParameter name="pumpLow" value="5"/>
	<IntegerParameter name="INF" value="10000000"/>
	<IntegerParameter name="pumpHigh" value="10"/>
	<IntegerParameter name="switchThreshold" value="7"/>
</DNHA>


