<!-- DO NOT EDIT this file, it is created by running make.
     The file to edit is $PTII/doc/ptIIx.x.release.htm
     where x.x is the release number, then run 'make update'
     to update the derived files and check them in to cvs. -->
<!-- $Id$ -->
<html>
<head>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
<title>Ptolemy II 6.0-devel Release Notes</title>
<link href="default.css" rel="stylesheet" type="text/css">
</head>
<body bgcolor="#ffffff">
<!--whatsnew-->
Contents:
<ul>
<li> <a href="#highlights">Highlights</a>
<li> <a href="#other">Other Key New Capabilities</a>
<li> <a href="#libraries">New and Enhanced Actor Libraries</a>
<li> <a href="#demos">New demonstrations</a>
<li> <a href="#features">Additional features</a>
<li> <a href="#bugs">Bug fixes</a>
</ul>

<h2> <a name="highlights">Highlights</a>
</h2>

<h3>Ptolemy II 6.0 Highlights</h3>

<menu>

<li> <a href="../ptolemy/codegen/README.html">Ptolemy II C Code Generation</a>
 <p>Primary Developers: Jackie Leung, Gang Zhou, Ye Zhou, Edward A. Lee,
	Christopher Brooks
 <br>  Ptolemy II can now generate C code for SDF, FSM and HDF models.
  This new code generator consists of actor templates (called helpers)
  that contain C code stubs that are stitched together.  Only a subset
  of actors have helpers, so only a subset of models can be converted
  to C.  Creating new helpers is fairly easy though.  The code generator
  has been written to be easily extensible to languages other than C.


<li> The
<a href="../ptolemy/domains/rendezvous/doc/body.htm" target="body">Rendezvous domain</a>:
 <br>Primary Authors: Thomas Huining Feng, Edward A. Lee
 <br>In the Rendezvous domain in Ptolemy II, each actor executes in
its own thread of control, and communication between actors is
by rendezvous.  If an actor is ready to send a message,
it blocks until the receiving actor is ready to receive it. Similarly if
an actor is ready to receive a message, it blocks until the sending actor
is ready to send it.
<p>
This domain supports both conditional and multi-way rendezvous.
In conditional rendezvous, an actor is willing to rendezvous with
any one of several other actors. In multiway rendezvous, an actor requires
rendezvous with multiple other actors at the same time.
When using conditional rendezvous, the choice of which rendezvous
occurs is nondeterministic, in general.
<P>
The model of computation is based on the Communicating Sequential
Processesmodel first proposed by Hoare in 1978. Rendezvous-based
communication is also known as synchronous message passing, but we
avoid this term to avoid confusion with the SR (synchronous/reactive)
domain.

<li> <a href="../configs/viptos/index.htm">Viptos</a> 
 <i>Visual editor and code generator for TinyOS programs</i>.
 <br>Primary Author: Elaine Cheong
 <br><B>Viptos</B> is an interface between TinyOS and Ptolemy II that
provides a graphical user interface for TinyOS developers.  

<li> <a href="codeDoc/ptolemy/distributed/domains/sdf/kernel/DistributedSDFDirector.html">Distributed SDF Domain using Jini</a>
 <br>Authors: Daniel Lazaro Cuadrado (Aalborg University).
 <br> The Distributed-SDF domain is an extended version of the existing SDF
 Domain that performs the simulation in a distributed manner using
 Jini.  See the
 <a href="ptolemy/distributed/demo/Sleep/Sleep.xml">Sleep Demo</a> for details


</ul>

<h2><a name="other">Other Key New Capabilities</a>
</h2>
<ul>

<li> <a href="codeDoc/ptolemy/data/UnionToken.html">UnionToken</a>
 <br>Primary Authors: Yang Zhao, Yuhong Xiong (HP)
 The UnionToken can contain one instance of multiple types.  This
 allows type safe operations to be performed in models when the
 token type could be any one of several possible types.


</ul>

<h2><a name="libraries">New and Enhanced Actor Libraries</a>
</h2>
A number of new and enhanced actor libraries are included in version 6.0-devel
You may also wish to refer to the
<a href="/codeDoc/ptolemy/actor/lib/package-summary.html">ptolemy.actor.lib</a>
package, where most of the domain-polymorphic actors reside (domain-polymorphic actors are
those that can be used in more than one domain).

New Actors

New Demos


<h2>
<a name="features"> Additional Features </a>
</h2>
<ul>

<li> <i>Java compatibility</i>:
<br>
Ptolemy II can be compiled under Java 1.5.0_06 and Java 1.4.2_07
Java 1.5.0_06 is preferred though.

<br>

<li>Support changing the order of attributes, ports, etc., and
support moving objects towards the foreground or background
in the user interface. This is particularly helpful when
editing icons, since the elements of the icon can now be sent
to the background or brought to the foreground by right clicking
and selecting the appropriate option.

<br>

<li> <i>Fractional math</i>:
<br>
A new library supporting arithmetic on fractions has been created. See:
<ul>
 <li> <a href="codeDoc/ptolemy/math/FractionArrayMath.html">FractionArrayMath</a>
 <li> <a href="codeDoc/ptolemy/math/FractionMatrixMath.html">FractionMatrixMath</a>
</ul>

<li>Added external source (URL) option to the Instantiate Entity
command in the Graph menu.

<li> Other New java files:
  <ul>
    <li> <a href="codeDoc/ptolemy/actor/StateReceiver.html">ptolemy/StateReceiver.java</a>
    <li> <a href="codeDoc/ptolemy/actor/TypeOpaqueCompositeActor.html">ptolemy/actor/TypeOpaqueCompositeActor.java</a>
    <li> <a href="codeDoc/ptolemy/actor/gui/CompositeActorSimpleApplication.html">ptolemy/actor/gui/CompositeActorSimpleApplication.java</a>
    <li> <a href="codeDoc/ptolemy/actor/gui/PasswordAttribute.html">ptolemy/actor/gui/PasswordAttribute.java</a>
    <li> <a href="codeDoc/ptolemy/actor/gui/QueryUtilities.html">ptolemy/actor/gui/QueryUtilities.java</a>
    <li> <a href="codeDoc/ptolemy/actor/lib/StringConst.html">ptolemy/actor/lib/StringConst.java</a>
    <li> <a href="codeDoc/ptolemy/actor/lib/UnaryMathFunction.html">ptolemy/actor/lib/UnaryMathFunction.java</a>
    <li> <a href="codeDoc/ptolemy/actor/lib/image/ImageTableau.html">ptolemy/actor/lib/image/ImageTableau.java</a>
    <li> <a href="codeDoc/ptolemy/actor/util/DFUtilities.html">ptolemy/actor/util/DFUtilities.java</a>
    <li> <a href="codeDoc/ptolemy/caltrop/actors/AbstractCalInterpreter.html">ptolemy/caltrop/actors/AbstractCalInterpreter.java</a>
    <li> <a href="codeDoc/ptolemy/domains/ct/kernel/solver/ExplicitRK45Solver.html">ptolemy/domains/ct/kernel/solver/ExplicitRK45Solver.java</a>
    <li> <a href="codeDoc/ptolemy/domains/fsm/kernel/NonStrictFSMDirector.html">ptolemy/domains/fsm/kernel/NonStrictFSMDirector.java</a>
    <li> <a href="codeDoc/ptolemy/kernel/util/Moveable.html">ptolemy/kernel/util/Moveable.java</a>
    <li> <a href="codeDoc/ptolemy/moml/filter/GRColorChanges.html">ptolemy/moml/filter/GRColorChanges.java</a>
    <li> <a href="codeDoc/ptolemy/vergil/kernel/attributes/AbstractTextAttribute.html">ptolemy/vergil/kernel/attributes/AbstractTextAttribute.java</a>
    <li> <a href="codeDoc/ptolemy/vergil/kernel/attributes/AttributeExpressionAttribute.html">ptolemy/vergil/kernel/attributes/AttributeExpressionAttribute.java</a>
    <li> <a href="codeDoc/ptolemy/vergil/kernel/attributes/AttributeValueAttribute.html">ptolemy/vergil/kernel/attributes/AttributeValueAttribute.java</a>
    <li> <a href="codeDoc/ptolemy/vergil/kernel/attributes/IDAttribute.html">ptolemy/vergil/kernel/attributes/IDAttribute.java</a>
    <li> <a href="codeDoc/ptolemy/vergil/toolbox/MoveAction.html">ptolemy/vergil/toolbox/MoveAction.java</a>
  </ul>

</ul>


<h2>
<a name="bugs"> Bug fixes </a>
</h2>
<ul>

<li>Fixed "Restore Defaults" when actors and directors
use the three argument constructor for parameters.

<li>Previously, if a class definition were to show the name
of ports, there was no way to turn this off (the attribute
_showName) could not be removed. Now, marker attributes
such as _showName are boolean valued parameters, so they
can be turned off by overriding their value.

<li>Fixed long standing bug in copy where objects are represented
in the wrong order in the exported MoML.

<li>Fixed some subtle bugs in ModalModel, where changes to
input/output status and ordering of ports were not properly
reflected in the mirror ports.

<li> A number of potential deadlocks have been fixed:
<ul>
 <li> deadlock while dragging actors during a run.
 <li> deadlocks in PN when exceptions occur in the model.
</ul>

</ul>

</ul>


<h2>Backward Compatibility</h2>


Most models developed under Ptolemy II 1.0.1,
2.0.1, 3.0.2, 4.01  or HyVisual 2.2-beta an Hyvisual 3.0
should run under Ptolemy II 6.0-deve

The MoMLParser includes a list of backward
compatibility filters that make certain changes on models
when read, handling such issues as actors being moved or renamed
and parameter names being changed.
The filters themselves are defined in
<a href="codeDoc/ptolemy/moml/filter/package-summary.html">
ptolemy.moml.filter</a>.
If you have developed your own actors under earlier versions of Ptolemy II by
writing your own Java files, you should recompile all your java code with
the new release.  In theory, copying the .class files should work, but
recompiling is safer.


<h3>Backward compatible issues that are handled automatically</h3>

<ul>
<li>ptolemy.moml.filter.AddEditorFactory: If a parameter has a _location, then
add a VisibleParameterEditorFactory named _editorFactory.

<li>ptolemy.moml.filter.AddIcon: Add specialized icons that display the value
of one of the parameters.
<br>The affected actors are:
	<ul>
	<li>ptolemy.actor.lib.Const
	<li>ptolemy.actor.lib.MathFunction
	<li>ptolemy.actor.lib.TrigFunction
	<li>ptolemy.actor.lib.Scale
	<li>ptolemy.actor.lib.Expression
        </ul>

<li>ptolemy.moml.filter.ClassChanges: change any class names that have been renamed and remove obsolete classes.
Below are original class names followed by the new class names:
	<ul>
	<li>ptolemy.vergil.fsm.modal.ModalController	 -&gt; ptolemy.domains.fsm.modal.ModalController
	<li>ptolemy.vergil.fsm.modal.ModalModel$ModalTableauFactory	 -&gt; ptolemy.vergil.fsm.modal.ModalTableauFactory
	<li>ptolemy.vergil.fsm.modal.TransitionRefinement	 -&gt; ptolemy.domains.fsm.modal.TransitionRefinement
	<li>ptolemy.vergil.fsm.modal.RefinementPort	 -&gt; ptolemy.domains.fsm.modal.RefinementPort
	<li>ptolemy.vergil.fsm.modal.Refinement	 -&gt; ptolemy.domains.fsm.modal.Refinement
	<li>ptolemy.kernel.util.VersionAttribute	 -&gt; ptolemy.kernel.attributes.VersionAttribute
	<li>ptolemy.vergil.icon.ImageEditorIcon	 -&gt; ptolemy.vergil.icon.ImageIcon
	<li>ptolemy.domains.fsm.kernel.InterfaceAutomatonTransition	 -&gt; ptolemy.domains.fsm.kernel.ia.InterfaceAutomatonTransition
	<li>ptolemy.vergil.fsm.modal.ModalPort	 -&gt; ptolemy.domains.fsm.modal.ModalPort
	<li>ptolemy.kernel.attributes.IDAttribute	 -&gt; ptolemy.vergil.kernel.attributes.IDAttribute
	<li>ptolemy.vergil.fsm.modal.TransitionRefinementPort	 -&gt; ptolemy.domains.fsm.modal.TransitionRefinementPort
	<li>ptolemy.kernel.attributes.FileAttribute	 -&gt; ptolemy.data.expr.FileParameter
	<li>ptolemy.domains.sr.lib.Latch	 -&gt; ptolemy.domains.sr.lib.Current
	<li>ptolemy.domains.sdf.kernel.SDFIOPort	 -&gt; ptolemy.actor.TypedIOPort
	<li>ptolemy.moml.Location	 -&gt; ptolemy.kernel.util.Location
	<li>ptolemy.domains.fsm.lib.RelationList	 -&gt; ptolemy.domains.fsm.kernel.RelationList
	<li>ptolemy.domains.gr.lib.ViewScreen	 -&gt; ptolemy.domains.gr.lib.ViewScreen3D
	<li>ptolemy.actor.lib.comm.SerialComm	 -&gt; ptolemy.actor.lib.io.comm.SerialComm
	<li>ptolemy.actor.hoc.MultiInstanceComposite	 -&gt; ptolemy.actor.lib.hoc.MultiInstanceComposite
	<li>ptolemy.vergil.fsm.modal.ModalModel	 -&gt; ptolemy.domains.fsm.modal.ModalModel
        <ul>
Below are the classes to remove:
	<ul>
	<li>ptolemy.data.expr.NotEditableParameter
	<li>ptolemy.domains.de.kernel.DEIOPort
	<ul>

<li>ptolemy.moml.filter.HideAnnotationNames: If an annotation name ends with
'annotation1', then add _hideName if necessary.

<li>ptolemy.moml.filter.MultiportToSinglePort: Update any actor multiports that are now
single ports.
<br>Below are the actors that are affected, along with the port name:
	<ul>
	<li>ptolemy.actor.lib.gui.MatrixViewer
	<li>input	ptolemy.domains.sdf.lib.Autocorrelation
	<li>output	ptolemy.actor.lib.Const
	<li>output	ptolemy.actor.lib.NonStrictTest
	<li>input
	</ul>

<li>ptolemy.moml.filter.ParameterNameChanges: Update any Parameter names
that have been renamed.
<br>Below are the actors that are affected, along with the Parameter name 
and the new name:
	<ul>
	<li>ptolemy.domains.de.lib.Server
		serviceTime	 -&gt; newServiceTime
	<li>ptolemy.domains.pn.kernel.PNDirector
		Initial_queue_capacity	 -&gt; initialQueueCapacity
	<li>ptolemy.domains.de.lib.VariableDelay
		defaultDelay	 -&gt; delay
	<ul>
<li>ptolemy.moml.filter.PortClassChanges: Update any actor port classes that have been
changed.
<br>Below are the actors that are affected, along
with the old port class and the new port class:
	<ul>
	<li>ptolemy.domains.sdf.lib.vq.HTVQEncode.input
		<ul>
	<li>	ptolemy.domains.sdf.kernel.SDFIOPort	 -&gt; ptolemy.actor.TypedIOPort
		</ul>
	<li>output
		<ul>
	<li>	ptolemy.domains.sdf.kernel.SDFIOPort	 -&gt; ptolemy.actor.TypedIOPort
		</ul>
	<li>ptolemy.domains.de.lib.Server.newServiceTime
		<ul>
	<li>	ptolemy.domains.de.kernel.DEIOPort	 -&gt; ptolemy.actor.parameters.ParameterPort
		</ul>
	<li>ptolemy.domains.sdf.lib.vq.VQDecode.input
		<ul>
	<li>	ptolemy.domains.sdf.kernel.SDFIOPort	 -&gt; ptolemy.actor.TypedIOPort
		</ul>
	<li>output
		<ul>
	<li>	ptolemy.domains.sdf.kernel.SDFIOPort	 -&gt; ptolemy.actor.TypedIOPort
		</ul>
	<li>ptolemy.domains.sdf.lib.vq.ImagePartition.input
		<ul>
	<li>	ptolemy.domains.sdf.kernel.SDFIOPort	 -&gt; ptolemy.actor.TypedIOPort
		</ul>
	<li>output
		<ul>
	<li>	ptolemy.domains.sdf.kernel.SDFIOPort	 -&gt; ptolemy.actor.TypedIOPort
		</ul>
	<li>ptolemy.domains.de.lib.VariableDelay.delay
		<ul>
		ptolemy.domains.de.kernel.DEIOPort	 -&gt; ptolemy.actor.parameters.ParameterPort
		</ul>
	<li>ptolemy.domains.sdf.lib.vq.ImageUnpartition.input
		<ul>
	<li>	ptolemy.domains.sdf.kernel.SDFIOPort	 -&gt; ptolemy.actor.TypedIOPort
		</ul>
	<li>output
		<ul>
		<li>ptolemy.domains.sdf.kernel.SDFIOPort	 -&gt; ptolemy.actor.TypedIOPort
		</ul>
        </ul>

<li>ptolemy.moml.filter.PortNameChanges: Update any actor port names that have been
renamed.
<br>Below are the actors that are affected, along
with the old port name and the new port name:
	<ul>
	<li>ptolemy.domains.de.lib.Server
		serviceTime	 -&gt; newServiceTime
	<li>ptolemy.actor.lib.comm.Scrambler
		initial	 -&gt; initialState
	<li>ptolemy.actor.lib.conversions.CartesianToComplex
		imag	 -&gt; y
		real	 -&gt; x
	<li>ptolemy.actor.lib.comm.ConvolutionalCoder
		uncodeBlockSize	 -&gt; uncodedRate
		initial	 -&gt; initialState
	<li>ptolemy.actor.lib.comm.ViterbiDecoder
		uncodeBlockSize	 -&gt; uncodedRate
		amplitude	 -&gt; constellation
	<li>ptolemy.actor.lib.Sleep
		delay	 -&gt; sleepTime
	<li>ptolemy.actor.lib.conversions.ComplexToCartesian
		imag	 -&gt; y
		real	 -&gt; x
        </ul>

<li>ptolemy.moml.filter.PropertyClassChanges: Update any actor port class names
that have been renamed.
<br>Below are the actors that are affected, along with the port name
and the new classname:
	<ul>
	<li>ptolemy.domains.ct.lib.ZeroCrossingDetector
		useEventValue	 -&gt; null
	<li>ptolemy.actor.lib.MathFunction
		function	 -&gt; ptolemy.data.expr.StringParameter
	<li>ptolemy.domains.ct.lib.LevelCrossingDetector
		useEventValue	 -&gt; null
	<li>ptolemy.domains.ct.kernel.CTEmbeddedDirector
		breakpointODESolver	 -&gt; null
	<li>ptolemy.domains.sdf.lib.Autocorrelation
	<li>ptolemy.domains.sdf.lib.FIR
	<li>ptolemy.domains.sdf.lib.Chop
	<li>ptolemy.domains.sdf.lib.BitsToInt
	<li>ptolemy.domains.sdf.lib.DownSample
	<li>ptolemy.domains.sdf.lib.DoubleToMatrix
	<li>ptolemy.domains.sdf.lib.IntToBits
	<li>ptolemy.domains.sdf.lib.ArrayToSequence
	<li>ptolemy.domains.sdf.lib.CountTrues
	<li>ptolemy.domains.sdf.lib.VariableFIR
	<li>ptolemy.domains.sdf.lib.MatrixToSequence
	<li>ptolemy.domains.sdf.lib.IFFT
	<li>ptolemy.domains.sdf.lib.SequenceToArray
	<li>ptolemy.domains.sdf.lib.FFT
	<li>ptolemy.domains.sdf.lib.SampleDelay
	<li>ptolemy.domains.sdf.lib.MatrixToDouble
	<li>ptolemy.domains.sdf.lib.LineCoder
	<li>ptolemy.domains.sdf.lib.SequenceToMatrix
	<li>ptolemy.domains.sdf.lib.Repeat
	<li>ptolemy.domains.sdf.lib.UpSample
		tokenProductionRate	 -&gt; null
		tokenInitProduction	 -&gt; null
		tokenConsumptionRate	 -&gt; null
	<li>ptolemy.kernel.util.Attribute
		_hideName	 -&gt; ptolemy.kernel.util.SingletonAttribute
	<li>ptolemy.domains.sr.kernel.Director
		scheduler	 -&gt; ptolemy.data.expr.StringParameter
	<li>ptolemy.actor.lib.io.DirectoryListing
		directoryOrURL	 -&gt; ptolemy.actor.parameters.FilePortParameter
	<li>ptolemy.actor.lib.TrigFunction
		function	 -&gt; ptolemy.data.expr.StringParameter
	<li>ptolemy.vergil.actor.lib.VisualModelReference
		modelFileOrURL	 -&gt; ptolemy.actor.parameters.FilePortParameter
	<li>ptolemy.actor.lib.Expression
		expression	 -&gt; ptolemy.kernel.util.StringAttribute
	<li>ptolemy.domains.ct.kernel.CTMixedSignalDirector
		breakpointODESolver	 -&gt; null
	<li>ptolemy.actor.lib.hoc.ModelReference
		modelFileOrURL	 -&gt; ptolemy.actor.parameters.FilePortParameter
	<li>ptolemy.matlab.Expression
		expression	 -&gt; ptolemy.data.expr.StringParameter
	<li>ptolemy.domains.fsm.modal.ModalModel
		_Director	 -&gt; null
		directorClass	 -&gt; ptolemy.data.expr.StringParameter
	<li>ptolemy.domains.ct.kernel.CTMultiSolverDirector
		breakpointODESolver	 -&gt; null
	</ul>
<li>ptolemy.moml.filter.GRColorChanges: Update GR actor with the following changes:
	Parameter name "RGB color" --&gt; "diffuseColor"

<li>ptolemy.moml.filter.RemoveProperties: Remove the properties listed below:
        <ul>
	<li>stopTime
		<ul>
	<li>	MaxDouble	 -&gt; null
	<li>	ptolemy.data.expr.Parameter	 -&gt; null
	<li>	1.7976931348623157E308	 -&gt; null
	<li>	1.7976931348623E308	 -&gt; null
	<li>	1.797693134862316E308	 -&gt; null
		</ul>
	<li>directorClass
		<ul>
	<li>	ptolemy.data.expr.StringParameter	 -&gt; null
	<li>	ptolemy.domains.fsm.kernel.HSDirector	 -&gt; null
	<li>	ptolemy.kernel.util.StringAttribute	 -&gt; null
		</ul>
        </ul>	

</ul>

</body>
</html>
