#!/bin/sh

for file in $@
do
    echo $file
    awk '{ if ($0 ~ /@AcceptedRating/) {
             acceptedRating=$2
             for(i = 3; i<=NF; i++) {
                acceptedRating=acceptedRating " " $i
             }
         } else if ($0 ~ /@ProposedRating/) {
             proposedRating=$2
             for(i = 3; i<=NF; i++) {
                proposedRating=proposedRating " " $i
             }
         } else if ($0 ~ /@since/) {
             print $0
	     start = index($0, "@since") -1
	     blanks="         "
	     indent=substr(blanks, 1, start)
	     print indent "@Pt.ProposedRating", proposedRating
             print indent "@Pt.AcceptedRating", acceptedRating
         } else {
	    print $0
	 }
        }
        ' $file > /tmp/mvratings.tmp
    diff -c $file /tmp/mvratings.tmp
    #cp /tmp/mvratings.tmp $file 

done

rm -f /tmp/mvratings.tmp
