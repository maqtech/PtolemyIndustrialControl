<?xml version="1.0" standalone="no"?>
<!DOCTYPE entity PUBLIC "-//UC Berkeley//DTD MoML 1//EN"
    "http://ptolemy.eecs.berkeley.edu/xml/dtd/MoML_1.dtd">
<entity name="tourguide" class="ptolemy.actor.TypedCompositeActor">
    <property name="_createdBy" class="ptolemy.kernel.attributes.VersionAttribute" value="9.0.devel">
    </property>
    <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={0, 0, 1292, 812}, maximized=false}">
    </property>
    <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[1064, 696]">
    </property>
    <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0">
    </property>
    <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{384.225266959799, 301.990891959799}">
    </property>
    <property name="WebServer" class="org.ptolemy.ptango.lib.WebServer">
        <property name="resourceLocation" class="ptolemy.data.expr.FileParameter" value="$PTII/org/ptolemy/ptango/demo/WebServerDE">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[585.0, 85.0]">
        </property>
        <property name="resourceLocation2" class="ptolemy.data.expr.FileParameter" value="$PTII/org/ptolemy/ptango/demo/files">
        </property>
    </property>
    <property name="DE Director" class="ptolemy.domains.de.kernel.DEDirector">
        <property name="stopWhenQueueIsEmpty" class="ptolemy.data.expr.Parameter" value="false">
        </property>
        <property name="synchronizeToRealTime" class="ptolemy.data.expr.Parameter" value="false">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[85.0, 50.0]">
        </property>
    </property>
    <property name="Annotation" class="ptolemy.vergil.kernel.attributes.TextAttribute">
        <property name="text" class="ptolemy.kernel.util.StringAttribute" value="This model launches a web server and provides a service&#10;available at http://localhost:8080/tourguide.&#10;Run the model and navigate to that location&#10;(or click on this comment).">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[150.0, 20.0]">
        </property>
        <property name="LiveLink" class="ptolemy.actor.gui.LiveLink" value="http://localhost:8080/tourguide#in_browser">
            <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
                <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
                </property>
            </property>
            <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">LL</text>
      </svg>
    </configure>
            </property>
            <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="{440, 335}">
            </property>
        </property>
    </property>
    <property name="Annotation2" class="ptolemy.vergil.kernel.attributes.TextAttribute">
        <property name="text" class="ptolemy.kernel.util.StringAttribute" value="Handle requests for the splash screen&#10;/tourguide">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[75.0, 130.0]">
        </property>
    </property>
    <property name="Annotation3" class="ptolemy.vergil.kernel.attributes.TextAttribute">
        <property name="text" class="ptolemy.kernel.util.StringAttribute" value="Handle requests for a specific location, of the form:&#10;/tourguide/location?indoorLocation=-1">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[70.0, 360.0]">
        </property>
    </property>
    <property name="Annotation4" class="ptolemy.vergil.kernel.attributes.TextAttribute">
        <property name="text" class="ptolemy.kernel.util.StringAttribute" value="Handle requests for a specific location, of the form:&#10;/tourguide/location?gps=123.4&amp;indoorLocation=-1">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[65.0, 580.0]">
        </property>
    </property>
    <entity name="HttpActor" class="org.ptolemy.ptango.lib.HttpActor">
        <property name="path" class="ptolemy.data.expr.StringParameter" value="/tourguide/*">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[130.0, 280.0]">
        </property>
    </entity>
    <entity name="MicrostepDelay" class="ptolemy.actor.lib.MicrostepDelay">
        <property name="_location" class="ptolemy.kernel.util.Location" value="[140.0, 215.0]">
        </property>
        <property name="_flipPortsHorizontal" class="ptolemy.data.expr.Parameter" value="true">
        </property>
    </entity>
    <entity name="FileReaderIndexPage" class="ptolemy.actor.lib.io.FileReader">
        <property name="fileOrURL" class="ptolemy.data.expr.FileParameter" value="index.html">
        </property>
        <doc>Read an entire file and output as a string</doc>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[340.0, 290.0]">
        </property>
        <port name="trigger" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="multiport"/>
            <property name="_type" class="ptolemy.actor.TypeAttribute" value="general">
            </property>
        </port>
    </entity>
    <entity name="LocationSelector" class="ptolemy.actor.TypedCompositeActor">
        <property name="_location" class="ptolemy.kernel.util.Location" value="[325.0, 530.0]">
        </property>
        <property name="Annotation" class="ptolemy.vergil.kernel.attributes.TextAttribute">
            <property name="text" class="ptolemy.kernel.util.StringAttribute" value="If an indoor location is given (i.e. not -1), use it">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[120.0, 370.0]">
            </property>
        </property>
        <property name="Annotation2" class="ptolemy.vergil.kernel.attributes.TextAttribute">
            <property name="text" class="ptolemy.kernel.util.StringAttribute" value="Otherwise, check for an outdoor location (not -1)">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[120.0, 435.0]">
            </property>
        </property>
        <property name="Annotation3" class="ptolemy.vergil.kernel.attributes.TextAttribute">
            <property name="text" class="ptolemy.kernel.util.StringAttribute" value="If both are -1, return a default page">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[125.0, 490.0]">
            </property>
        </property>
        <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={327, 184, 928, 616}, maximized=false}">
        </property>
        <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[700, 500]">
        </property>
        <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0">
        </property>
        <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{350.0, 250.0}">
        </property>
        <property name="Annotation4" class="ptolemy.vergil.kernel.attributes.TextAttribute">
            <property name="text" class="ptolemy.kernel.util.StringAttribute" value="Problem with location 0 - &#10;Some detail with Select actor?&#10;Use ConfigurationSelect instead?">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[125.0, 5.0]">
            </property>
        </property>
        <port name="parameters" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[30.0, 335.0]">
            </property>
        </port>
        <port name="response" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[425.0, 185.0]">
            </property>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <entity name="RecordDisassembler" class="ptolemy.actor.lib.RecordDisassembler">
            <property name="_location" class="ptolemy.kernel.util.Location" value="[185.0, 315.0]">
            </property>
            <port name="indoorLocation" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
        </entity>
        <entity name="Select" class="ptolemy.actor.lib.Select">
            <property name="_location" class="ptolemy.kernel.util.Location" value="[325.0, 185.0]">
            </property>
        </entity>
        <entity name="Location0" class="ptolemy.actor.TypedCompositeActor">
            <property name="_location" class="ptolemy.kernel.util.Location" value="[210.0, 105.0]">
            </property>
            <port name="response" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[375.0, 210.0]">
                </property>
            </port>
            <port name="trigger" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="{20.0, 200.0}">
                </property>
            </port>
            <entity name="FileReader" class="ptolemy.actor.lib.io.FileReader">
                <property name="fileOrURL" class="ptolemy.data.expr.FileParameter" value="location0.html">
                </property>
                <doc>Read an entire file and output as a string</doc>
                <property name="_location" class="ptolemy.kernel.util.Location" value="{187.0, 210.0}">
                </property>
                <port name="trigger" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="multiport"/>
                    <property name="_type" class="ptolemy.actor.TypeAttribute" value="general">
                    </property>
                </port>
            </entity>
            <relation name="relation" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation2" class="ptolemy.actor.TypedIORelation">
            </relation>
            <link port="response" relation="relation"/>
            <link port="trigger" relation="relation2"/>
            <link port="FileReader.output" relation="relation"/>
            <link port="FileReader.trigger" relation="relation2"/>
        </entity>
        <entity name="ExpressionToToken" class="ptolemy.actor.lib.conversions.ExpressionToToken">
            <property name="_location" class="ptolemy.kernel.util.Location" value="[300.0, 335.0]">
            </property>
            <port name="output" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_type" class="ptolemy.actor.TypeAttribute" value="int">
                </property>
            </port>
        </entity>
        <entity name="Location1" class="ptolemy.actor.TypedCompositeActor">
            <property name="_location" class="ptolemy.kernel.util.Location" value="[210.0, 180.0]">
            </property>
            <port name="response" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[305.0, 210.0]">
                </property>
            </port>
            <port name="trigger" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="{20.0, 200.0}">
                </property>
            </port>
            <entity name="FileReader" class="ptolemy.actor.lib.io.FileReader">
                <property name="fileOrURL" class="ptolemy.data.expr.FileParameter" value="location1.html">
                </property>
                <doc>Read an entire file and output as a string</doc>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[160.0, 210.0]">
                </property>
                <port name="trigger" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="multiport"/>
                    <property name="_type" class="ptolemy.actor.TypeAttribute" value="general">
                    </property>
                </port>
            </entity>
            <relation name="relation" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation2" class="ptolemy.actor.TypedIORelation">
            </relation>
            <link port="response" relation="relation"/>
            <link port="trigger" relation="relation2"/>
            <link port="FileReader.output" relation="relation"/>
            <link port="FileReader.trigger" relation="relation2"/>
        </entity>
        <entity name="Location2" class="ptolemy.actor.TypedCompositeActor">
            <property name="_location" class="ptolemy.kernel.util.Location" value="[210.0, 260.0]">
            </property>
            <port name="response" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[310.0, 210.0]">
                </property>
            </port>
            <port name="trigger" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="{20.0, 200.0}">
                </property>
            </port>
            <entity name="FileReader" class="ptolemy.actor.lib.io.FileReader">
                <property name="fileOrURL" class="ptolemy.data.expr.FileParameter" value="location2.html">
                </property>
                <doc>Read an entire file and output as a string</doc>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[145.0, 210.0]">
                </property>
                <port name="trigger" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                    <property name="multiport"/>
                    <property name="_type" class="ptolemy.actor.TypeAttribute" value="general">
                    </property>
                </port>
            </entity>
            <relation name="relation" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="relation2" class="ptolemy.actor.TypedIORelation">
            </relation>
            <link port="response" relation="relation"/>
            <link port="trigger" relation="relation2"/>
            <link port="FileReader.output" relation="relation"/>
            <link port="FileReader.trigger" relation="relation2"/>
        </entity>
        <relation name="relation2" class="ptolemy.actor.TypedIORelation">
            <vertex name="vertex1" value="[120.0, 335.0]">
            </vertex>
        </relation>
        <relation name="relation5" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation6" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation3" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation4" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation7" class="ptolemy.actor.TypedIORelation">
        </relation>
        <link port="parameters" relation="relation2"/>
        <link port="response" relation="relation5"/>
        <link port="RecordDisassembler.input" relation="relation2"/>
        <link port="RecordDisassembler.indoorLocation" relation="relation6"/>
        <link port="Select.input" relation="relation3"/>
        <link port="Select.input" relation="relation4"/>
        <link port="Select.input" relation="relation7"/>
        <link port="Select.output" relation="relation5"/>
        <link port="Select.control" relation="relation"/>
        <link port="Location0.response" relation="relation3"/>
        <link port="Location0.trigger" relation="relation2"/>
        <link port="ExpressionToToken.input" relation="relation6"/>
        <link port="ExpressionToToken.output" relation="relation"/>
        <link port="Location1.response" relation="relation4"/>
        <link port="Location1.trigger" relation="relation2"/>
        <link port="Location2.response" relation="relation7"/>
        <link port="Location2.trigger" relation="relation2"/>
    </entity>
    <entity name="MicrostepDelay2" class="ptolemy.actor.lib.MicrostepDelay">
        <property name="_location" class="ptolemy.kernel.util.Location" value="[125.0, 445.0]">
        </property>
        <property name="_flipPortsHorizontal" class="ptolemy.data.expr.Parameter" value="true">
        </property>
    </entity>
    <entity name="HttpActor2" class="org.ptolemy.ptango.lib.HttpActor">
        <property name="path" class="ptolemy.data.expr.StringParameter" value="/tourguide/location/*">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[125.0, 530.0]">
        </property>
    </entity>
    <relation name="relation" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation2" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation5" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation4" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation7" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation6" class="ptolemy.actor.TypedIORelation">
    </relation>
    <link port="HttpActor.response" relation="relation"/>
    <link port="HttpActor.getParameters" relation="relation6"/>
    <link port="MicrostepDelay.input" relation="relation2"/>
    <link port="MicrostepDelay.output" relation="relation"/>
    <link port="FileReaderIndexPage.output" relation="relation2"/>
    <link port="FileReaderIndexPage.trigger" relation="relation6"/>
    <link port="LocationSelector.parameters" relation="relation7"/>
    <link port="LocationSelector.response" relation="relation4"/>
    <link port="MicrostepDelay2.input" relation="relation4"/>
    <link port="MicrostepDelay2.output" relation="relation5"/>
    <link port="HttpActor2.response" relation="relation5"/>
    <link port="HttpActor2.getParameters" relation="relation7"/>
</entity>
