<?xml version="1.0" standalone="no"?>
<!DOCTYPE model PUBLIC "-//UC Berkeley//DTD MoML 1//EN"
    "http://ptolemy.eecs.berkeley.edu/xml/dtd/moml.dtd">
<model name="hello" class="ptolemy.actor.TypedCompositeActor">
    <doc>
    This composite actor generates a sine wave.
    </doc>
    <director name="director" class="ptolemy.domains.sdf.kernel.SDFDirector">
	<property name="iterations" value="100"/>
    </director>
    <property name="samplingFrequency"
               value="8000.0"
               class="ptolemy.data.expr.Parameter">
      <doc>The sampling frequency, in the same units as the frequency.</doc>
    </property>
    <property name="frequency"
               value="440.0"
               class="ptolemy.data.expr.Parameter">
      <doc>
      The frequency of the sinusoid, in the same units as the
      sampling frequency.
      </doc>
    </property>
    <property name="phase"
               value="0.0"
               class="ptolemy.data.expr.Parameter">
      <doc>The phase, in radians.</doc>
    </property>

    <!-- Define the actors. -->
    <entity name="ramp" class="ptolemy.actor.lib.Ramp">
      <property name="step"
                 value="frequency*2*PI/samplingFrequency">
      </property>
      <property name="init" value="phase"></property>
      <port name="output"></port>
    </entity>
    <entity name="sine" class="ptolemy.actor.lib.Sine">
      <port name="input"></port>
      <port name="output"></port>
    </entity>

  <entity name="display" class="ptolemy.actor.gui.SequencePlotter">
    <port name="input"></port>
    <configure><![CDATA[
      <?xml version="1.0" standalone="no"?>
      <!DOCTYPE model PUBLIC "-//UC Berkeley//DTD PlotML 1//EN"
           "http://ptolemy.eecs.berkeley.edu/xml/dtd/plotml.dtd">
      <plot>
        <size width="450" height="300"/>
        <title>Modulated Waveform Example</title>
      </plot>
    ]]></configure>
  </entity>

    <!-- Make the connections -->
    <relation name="r1" class="ptolemy.actor.TypedIORelation"></relation>
    <link port="ramp.output" relation="r1"/>
    <link port="sine.input" relation="r1"/>

    <relation name="r2" class="ptolemy.actor.TypedIORelation"></relation>
    <link port="sine.output" relation="r2"/>
    <link port="display.input" relation="r2"/>
</model>