<?xml version="1.0" standalone="no"?>
<!DOCTYPE entity PUBLIC "-//UC Berkeley//DTD MoML 1//EN"
    "http://ptolemy.eecs.berkeley.edu/xml/dtd/MoML_1.dtd">
<entity name="modelAntennaGainAndTerrain" class="ptolemy.actor.TypedCompositeActor">
    <property name="_createdBy" class="ptolemy.kernel.attributes.VersionAttribute" value="3.1-devel">
    </property>
    <property name="WirelessDirector" class="ptolemy.domains.wireless.kernel.WirelessDirector">
        <property name="startTime" class="ptolemy.data.expr.Parameter" value="0.0">
        </property>
        <property name="stopTime" class="ptolemy.data.expr.Parameter" value="37.0">
        </property>
        <property name="stopWhenQueueIsEmpty" class="ptolemy.data.expr.Parameter" value="true">
        </property>
        <property name="synchronizeToRealTime" class="ptolemy.data.expr.Parameter" value="false">
        </property>
        <property name="isCQAdaptive" class="ptolemy.data.expr.Parameter" value="true">
        </property>
        <property name="minBinCount" class="ptolemy.data.expr.Parameter" value="2">
        </property>
        <property name="binCountFactor" class="ptolemy.data.expr.Parameter" value="2">
        </property>
        <property name="randomizeLocations" class="ptolemy.data.expr.Parameter" value="false">
        </property>
        <property name="seed" class="ptolemy.data.expr.Parameter" value="0L">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="135.0, 50.0">
        </property>
    </property>
    <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={64, 37, 801, 610}, maximized=false}">
    </property>
    <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[586, 492]">
    </property>
    <property name="_vergilZoomFactor" class="ptolemy.data.expr.Parameter" value="1.0">
    </property>
    <property name="_vergilCenter" class="ptolemy.data.expr.Parameter" value="{245.5316722972973, 257.2899070945946}">
    </property>
    <property name="annotation" class="ptolemy.kernel.util.Attribute">
        <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
        </property>
        <property name="_iconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure><svg><text x="20" y="20" style="font-size:14; font-family:SansSerif; fill:blue">This example illustrutes modelling antenna gain and terrain.
When you run this model, the Receiver will move arround the 
Sender with a step of 2*PI/36. And the Receiver simply extracts
the received power value and convets it to a Cartesian 
representation with the angle between the receiver and the sender.
By doing so, it actually displays the antenna 
pattern of the sender. 

The TerrainProperty component models some terrain characteristics 
between the sender and the receiver. If the receiver is behind it,
the receiver will not be able to here the signal from the sender.</text></svg></configure>
        </property>
        <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-A-</text>
      </svg>
    </configure>
        </property>
        <property name="_controllerFactory" class="ptolemy.vergil.basic.NodeControllerFactory">
        </property>
        <property name="_editorFactory" class="ptolemy.vergil.toolbox.AnnotationEditorFactory">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="-15.0, 285.0">
        </property>
    </property>
    <property name="annotation3" class="ptolemy.kernel.util.Attribute">
        <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
        </property>
        <property name="_iconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure><svg><text x="20" y="20" style="font-size:14; font-family:SansSerif; fill:darkgray">Authors: Yang Zhao</text></svg></configure>
        </property>
        <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-A-</text>
      </svg>
    </configure>
        </property>
        <property name="_controllerFactory" class="ptolemy.vergil.basic.NodeControllerFactory">
        </property>
        <property name="_editorFactory" class="ptolemy.vergil.toolbox.AnnotationEditorFactory">
        </property>
        <property name="_icon" class="ptolemy.vergil.icon.XMLIcon">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="320.0, 190.0">
        </property>
    </property>
    <entity name="Receiver" class="ptolemy.domains.wireless.kernel.WirelessComposite">
        <property name="_location" class="ptolemy.kernel.util.Location" value="[235.0, 245.0]">
        </property>
        <property name="DE Director" class="ptolemy.domains.de.kernel.DEDirector">
            <property name="startTime" class="ptolemy.data.expr.Parameter" value="0.0">
            </property>
            <property name="stopTime" class="ptolemy.data.expr.Parameter" value="1.7976931348623E308">
            </property>
            <property name="stopWhenQueueIsEmpty" class="ptolemy.data.expr.Parameter" value="true">
            </property>
            <property name="synchronizeToRealTime" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="isCQAdaptive" class="ptolemy.data.expr.Parameter" value="true">
            </property>
            <property name="minBinCount" class="ptolemy.data.expr.Parameter" value="2">
            </property>
            <property name="binCountFactor" class="ptolemy.data.expr.Parameter" value="2">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="75.0, 40.0">
            </property>
        </property>
        <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={104, 126, 902, 657}, maximized=false}">
        </property>
        <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[687, 539]">
        </property>
        <property name="annotation" class="ptolemy.kernel.util.Attribute">
            <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
            </property>
            <property name="_iconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                <configure><svg><text x="20" y="20" style="font-size:14; font-family:SansSerif; fill:blue">Receive the signal and display it:</text></svg></configure>
            </property>
            <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-A-</text>
      </svg>
    </configure>
            </property>
            <property name="_controllerFactory" class="ptolemy.vergil.basic.NodeControllerFactory">
            </property>
            <property name="_editorFactory" class="ptolemy.vergil.toolbox.AnnotationEditorFactory">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="5.0, 70.0">
            </property>
        </property>
        <property name="_vergilZoomFactor" class="ptolemy.data.expr.Parameter" value="1.0">
        </property>
        <property name="_vergilCenter" class="ptolemy.data.expr.Parameter" value="{300.0, 200.0}">
        </property>
        <port name="in" class="ptolemy.domains.wireless.kernel.WirelessIOPort">
            <property name="input"/>
            <property name="outsideChannel" class="ptolemy.data.expr.StringParameter" value="TerrainChannel">
            </property>
            <property name="outsideTransmitProperties" class="ptolemy.data.expr.Parameter" value="{range=Infinity, power=1.0}">
            </property>
            <property name="_type" class="ptolemy.actor.TypeAttribute" value="unknown">
            </property>
            <property name="_cardinal" class="ptolemy.kernel.util.StringAttribute" value="WEST">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="40.0, 140.0">
            </property>
        </port>
        <entity name="GetProperties" class="ptolemy.domains.wireless.lib.GetProperties">
            <property name="_location" class="ptolemy.kernel.util.Location" value="140.0, 140.0">
            </property>
        </entity>
        <entity name="RecordDisassembler" class="ptolemy.actor.lib.RecordDisassembler">
            <property name="_location" class="ptolemy.kernel.util.Location" value="225.0, 120.0">
            </property>
            <port name="input" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_cardinal" class="ptolemy.kernel.util.StringAttribute" value="WEST">
                </property>
            </port>
            <port name="power" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_type" class="ptolemy.actor.TypeAttribute" value="unknown">
                </property>
                <property name="_cardinal" class="ptolemy.kernel.util.StringAttribute" value="EAST">
                </property>
            </port>
        </entity>
        <entity name="Ramp" class="ptolemy.actor.lib.Ramp">
            <property name="init" class="ptolemy.data.expr.Parameter" value="0.0">
            </property>
            <property name="step" class="ptolemy.actor.parameters.PortParameter" value="2*PI/36">
            </property>
            <doc>Create a sequence of tokens with increasing value</doc>
            <property name="_location" class="ptolemy.kernel.util.Location" value="150.0, 330.0">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.XMLIcon">
            </property>
        </entity>
        <entity name="SetVariable" class="ptolemy.actor.lib.SetVariable">
            <property name="variableName" class="ptolemy.kernel.util.StringAttribute" value="_location">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="515.0, 265.0">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.XMLIcon">
            </property>
        </entity>
        <entity name="Ramp2" class="ptolemy.actor.lib.Ramp">
            <property name="init" class="ptolemy.data.expr.Parameter" value="0.0">
            </property>
            <property name="step" class="ptolemy.actor.parameters.PortParameter" value="2*PI/36">
            </property>
            <doc>Create a sequence of tokens with increasing value</doc>
            <property name="_location" class="ptolemy.kernel.util.Location" value="150.0, 255.0">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.XMLIcon">
            </property>
        </entity>
        <entity name="Clock" class="ptolemy.actor.lib.Clock">
            <property name="period" class="ptolemy.data.expr.Parameter" value="1.0">
            </property>
            <property name="offsets" class="ptolemy.data.expr.Parameter" value="{0.0}">
            </property>
            <property name="values" class="ptolemy.data.expr.Parameter" value="{1.0}">
            </property>
            <doc>Create a set of pulses</doc>
            <property name="_location" class="ptolemy.kernel.util.Location" value="45.0, 245.0">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.XMLIcon">
            </property>
        </entity>
        <entity name="Expression" class="ptolemy.actor.lib.Expression">
            <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="[cos(x)*100 + 135, sin(y)*100 + 245]">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="355.0, 320.0">
            </property>
            <port name="x" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
            </port>
            <port name="y" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
            </port>
        </entity>
        <entity name="XYPlotter" class="ptolemy.actor.lib.gui.XYPlotter">
            <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={106, 545, 697, 415}, maximized=false}">
            </property>
            <property name="_plotSize" class="ptolemy.actor.gui.SizeAttribute" value="[689, 360]">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="560.0, 150.0">
            </property>
            <configure>
<?plotml <!DOCTYPE plot PUBLIC "-//UC Berkeley//DTD PlotML 1//EN"
"http://ptolemy.eecs.berkeley.edu/xml/dtd/PlotML_1.dtd">
<plot>
<title>XYPlotter</title>
<xLabel></xLabel>
<yLabel></yLabel>
<xRange min="1.7976931348623157E308" max="-1.7976931348623157E308"/>
<yRange min="1.7976931348623157E308" max="-1.7976931348623157E308"/>
</plot>?>
            </configure>
        </entity>
        <entity name="PolarToCartesian" class="ptolemy.actor.lib.conversions.PolarToCartesian">
            <property name="_location" class="ptolemy.kernel.util.Location" value="380.0, 150.0">
            </property>
        </entity>
        <relation name="relation" class="ptolemy.actor.TypedIORelation">
            <vertex name="vertex1" value="95.0, 140.0">
            </vertex>
        </relation>
        <relation name="relation4" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation5" class="ptolemy.actor.TypedIORelation">
            <vertex name="vertex1" value="240.0, 255.0">
            </vertex>
        </relation>
        <relation name="relation6" class="ptolemy.actor.TypedIORelation">
            <vertex name="vertex1" value="90.0, 245.0">
            </vertex>
        </relation>
        <relation name="relation7" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation8" class="ptolemy.actor.TypedIORelation">
            <vertex name="vertex1" value="215.0, 330.0">
            </vertex>
        </relation>
        <relation name="relation9" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation3" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation2" class="ptolemy.actor.TypedIORelation">
        </relation>
        <link port="in" relation="relation"/>
        <link port="GetProperties.output" relation="relation4"/>
        <link port="GetProperties.trigger" relation="relation"/>
        <link port="RecordDisassembler.input" relation="relation4"/>
        <link port="RecordDisassembler.power" relation="relation9"/>
        <link port="Ramp.output" relation="relation8"/>
        <link port="Ramp.trigger" relation="relation6"/>
        <link port="SetVariable.input" relation="relation7"/>
        <link port="Ramp2.output" relation="relation5"/>
        <link port="Ramp2.trigger" relation="relation6"/>
        <link port="Clock.output" relation="relation6"/>
        <link port="Expression.output" relation="relation7"/>
        <link port="Expression.x" relation="relation5"/>
        <link port="Expression.y" relation="relation8"/>
        <link port="XYPlotter.inputX" relation="relation3"/>
        <link port="XYPlotter.inputY" relation="relation2"/>
        <link port="PolarToCartesian.magnitude" relation="relation9"/>
        <link port="PolarToCartesian.angle" relation="relation8"/>
        <link port="PolarToCartesian.x" relation="relation3"/>
        <link port="PolarToCartesian.y" relation="relation2"/>
    </entity>
    <entity name="Sender" class="ptolemy.domains.wireless.kernel.WirelessComposite">
        <property name="_location" class="ptolemy.kernel.util.Location" value="135.0, 245.0">
        </property>
        <property name="DE Director" class="ptolemy.domains.de.kernel.DEDirector">
            <property name="startTime" class="ptolemy.data.expr.Parameter" value="0.0">
            </property>
            <property name="stopTime" class="ptolemy.data.expr.Parameter" value="1.7976931348623E308">
            </property>
            <property name="stopWhenQueueIsEmpty" class="ptolemy.data.expr.Parameter" value="true">
            </property>
            <property name="synchronizeToRealTime" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="isCQAdaptive" class="ptolemy.data.expr.Parameter" value="true">
            </property>
            <property name="minBinCount" class="ptolemy.data.expr.Parameter" value="2">
            </property>
            <property name="binCountFactor" class="ptolemy.data.expr.Parameter" value="2">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="75.0, 40.0">
            </property>
        </property>
        <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={64, 202, 699, 518}, maximized=false}">
        </property>
        <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[484, 400]">
        </property>
        <port name="out" class="ptolemy.domains.wireless.kernel.WirelessIOPort">
            <property name="output"/>
            <property name="outsideChannel" class="ptolemy.data.expr.StringParameter" value="TerrainChannel">
            </property>
            <property name="outsideTransmitProperties" class="ptolemy.data.expr.Parameter" value="{range=Infinity, power=1.0}">
            </property>
            <property name="_type" class="ptolemy.actor.TypeAttribute" value="unknown">
            </property>
            <property name="_cardinal" class="ptolemy.kernel.util.StringAttribute" value="EAST">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="340.0, 170.0">
            </property>
        </port>
        <entity name="Clock" class="ptolemy.actor.lib.Clock">
            <property name="period" class="ptolemy.data.expr.Parameter" value="1.0">
            </property>
            <property name="offsets" class="ptolemy.data.expr.Parameter" value="{0.1}">
            </property>
            <property name="values" class="ptolemy.data.expr.Parameter" value="{1.0}">
            </property>
            <doc>Create a set of pulses</doc>
            <property name="_location" class="ptolemy.kernel.util.Location" value="95.0, 170.0">
            </property>
        </entity>
        <entity name="TransformPropert" class="ptolemy.domains.wireless.lib.TransformProperty">
            <property name="modelFileOrURL" class="ptolemy.data.expr.FileParameter" value="file:/C:/ptII/ptolemy/domains/wireless/demo/AntennaPattern/phasedArrayAntenna.xml">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="195.0, 170.0">
            </property>
        </entity>
        <relation name="relation" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation2" class="ptolemy.actor.TypedIORelation">
        </relation>
        <link port="out" relation="relation2"/>
        <link port="Clock.output" relation="relation"/>
        <link port="TransformPropert.data" relation="relation"/>
        <link port="TransformPropert.output" relation="relation2"/>
    </entity>
    <entity name="TerrainChannel" class="ptolemy.domains.wireless.lib.TerrainChannel">
        <property name="powerLossFactor" class="ptolemy.data.expr.Parameter" value="1.0">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="290.0, 105.0">
        </property>
    </entity>
    <entity name="TerrainProperty" class="ptolemy.domains.wireless.lib.TerrainProperty">
        <property name="xyPoints" class="ptolemy.data.expr.Parameter" value="{{0,0}, {0,100}, {20,100}, {20, 0}}">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="195.0, 235.0">
        </property>
    </entity>
</entity>
