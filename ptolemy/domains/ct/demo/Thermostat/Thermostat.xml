<?xml version="1.0" standalone="no"?>
<!DOCTYPE entity PUBLIC "-//UC Berkeley//DTD MoML 1//EN"
    "http://ptolemy.eecs.berkeley.edu/xml/dtd/MoML_1.dtd">
<entity name="Thermostat" class="ptolemy.actor.TypedCompositeActor">
    <property name="CTTopLevelDirector" class="ptolemy.domains.ct.kernel.CTMultiSolverDirector">
        <property name="startTime" class="ptolemy.data.expr.Parameter" value="0.0">
        </property>
        <property name="stopTime" class="ptolemy.data.expr.Parameter" value="5.0">
        </property>
        <property name="initStepSize" class="ptolemy.data.expr.Parameter" value="0.01">
        </property>
        <property name="minStepSize" class="ptolemy.data.expr.Parameter" value="1.0E-3">
        </property>
        <property name="maxStepSize" class="ptolemy.data.expr.Parameter" value="0.05">
        </property>
        <property name="maxIterations" class="ptolemy.data.expr.Parameter" value="20">
        </property>
        <property name="errorTolerance" class="ptolemy.data.expr.Parameter" value="1.0E-4">
        </property>
        <property name="valueResolution" class="ptolemy.data.expr.Parameter" value="1.0E-6">
        </property>
        <property name="timeResolution" class="ptolemy.data.expr.Parameter" value="1.0E-10">
        </property>
        <property name="ODESolver" class="ptolemy.data.expr.Parameter" value="&quot;ptolemy.domains.ct.kernel.solver.ExplicitRK23Solver&quot;">
        </property>
        <property name="breakpointODESolver" class="ptolemy.data.expr.Parameter" value="&quot;ptolemy.domains.ct.kernel.solver.DerivativeResolver&quot;">
        </property>
        <property name="_location" class="ptolemy.moml.Location" value="84.0, 37.0">
        </property>
    </property>
    <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[604, 454]">
    </property>
    <property name="_vergilLocation" class="ptolemy.actor.gui.LocationAttribute" value="[102, 100]">
    </property>
    <entity name="Const" class="ptolemy.actor.lib.Const">
        <property name="value" class="ptolemy.data.expr.Parameter" value="1.0">
        </property>
        <property name="_location" class="ptolemy.moml.Location" value="126.0, 157.0">
        </property>
        <port name="output" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
        </port>
        <port name="trigger" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="multiport"/>
        </port>
    </entity>
    <entity name="plot" class="ptolemy.actor.lib.gui.TimedPlotter">
        <property name="fillOnWrapup" class="ptolemy.data.expr.Parameter" value="true">
        </property>
        <property name="legend" class="ptolemy.kernel.util.StringAttribute">
        </property>
        <property name="startingDataset" class="ptolemy.data.expr.Parameter" value="0">
        </property>
        <property name="_location" class="ptolemy.moml.Location" value="426.0, 156.0">
        </property>
        <port name="input" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="multiport"/>
        </port>
        <configure><?plotml
<!DOCTYPE plot PUBLIC "-//UC Berkeley//DTD PlotML 1//EN"
"http://ptolemy.eecs.berkeley.edu/xml/dtd/PlotML_1.dtd">
<plot>
<title>Thermostat</title>
<xRange min="0.17016208668691202" max="0.23433790269489688"/>
<yRange min="0.18055781250000005" max="0.20570312500000007"/>
</plot>?>
        </configure>
    </entity>
    <entity name="HS" class="ptolemy.domains.ct.kernel.CTCompositeActor">
        <property name="HSDirector" class="ptolemy.domains.fsm.kernel.HSDirector">
            <property name="controllerName" class="ptolemy.kernel.util.StringAttribute" value="Controller">
            </property>
            <property name="_location" class="ptolemy.moml.Location" value="72.0, 32.0">
            </property>
        </property>
        <property name="_location" class="ptolemy.moml.Location" value="279.0, 157.0">
        </property>
        <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[604, 454]">
        </property>
        <property name="_vergilLocation" class="ptolemy.actor.gui.LocationAttribute" value="[102, 100]">
        </property>
        <port name="input" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="_location" class="ptolemy.moml.Location" value="46.999999999999986, 201.0">
            </property>
        </port>
        <port name="state" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="_location" class="ptolemy.moml.Location" value="512.0, 251.0">
            </property>
        </port>
        <entity name="Controller" class="ptolemy.domains.fsm.kernel.FSMActor">
            <property name="initialStateName" class="ptolemy.kernel.util.StringAttribute" value="Increasing">
            </property>
            <property name="_location" class="ptolemy.moml.Location" value="473.0, 181.0">
            </property>
            <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[604, 454]">
            </property>
            <property name="_vergilLocation" class="ptolemy.actor.gui.LocationAttribute" value="[102, 116]">
            </property>
            <port name="output" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
            </port>
            <port name="state" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
            </port>
            <entity name="Increasing" class="ptolemy.domains.fsm.kernel.State">
                <property name="refinementName" class="ptolemy.kernel.util.StringAttribute" value="Increasing">
                </property>
                <property name="_location" class="ptolemy.moml.Location" value="180.0, 225.0">
                </property>
                <port name="incomingPort" class="ptolemy.kernel.ComponentPort">
                </port>
                <port name="outgoingPort" class="ptolemy.kernel.ComponentPort">
                </port>
            </entity>
            <entity name="Decreasing" class="ptolemy.domains.fsm.kernel.State">
                <property name="refinementName" class="ptolemy.kernel.util.StringAttribute" value="Decreasing">
                </property>
                <property name="_location" class="ptolemy.moml.Location" value="420.0, 225.0">
                </property>
                <port name="incomingPort" class="ptolemy.kernel.ComponentPort">
                </port>
                <port name="outgoingPort" class="ptolemy.kernel.ComponentPort">
                </port>
            </entity>
            <relation name="ctrlTr1" class="ptolemy.domains.fsm.kernel.Transition">
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="output_isPresent">
                </property>
                <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                </property>
		<property name="reset" class="ptolemy.data.expr.Parameter" value="true">
		</property>
                <property name="triggerExpression" class="ptolemy.kernel.util.StringAttribute">
                </property>
                <property name="setActions" class="ptolemy.domains.fsm.kernel.CommitActionsAttribute" value="Decreasing.Integrator.initialState = state">
		</property>
            </relation>
            <relation name="ctrlTr2" class="ptolemy.domains.fsm.kernel.Transition">
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="output_isPresent">
                </property>
                <property name="preemptive" class="ptolemy.data.expr.Parameter" value="false">
                </property>
		<property name="reset" class="ptolemy.data.expr.Parameter" value="true">
		</property>
                <property name="triggerExpression" class="ptolemy.kernel.util.StringAttribute">
                </property>
                <property name="setActions" class="ptolemy.domains.fsm.kernel.CommitActionsAttribute" value="Increasing.Integrator.initialState = state">
                </property>
            </relation>
            <link port="Increasing.incomingPort" relation="ctrlTr2"/>
            <link port="Increasing.outgoingPort" relation="ctrlTr1"/>
            <link port="Decreasing.incomingPort" relation="ctrlTr1"/>
            <link port="Decreasing.outgoingPort" relation="ctrlTr2"/>
        </entity>
        <entity name="Increasing" class="ptolemy.domains.ct.kernel.CTCompositeActor">
            <property name="CTIncDir" class="ptolemy.domains.ct.kernel.CTEmbeddedDirector">
                <property name="startTime" class="ptolemy.data.expr.Parameter" value="0.0">
                </property>
                <property name="stopTime" class="ptolemy.data.expr.Parameter" value="1.797693135E308">
                </property>
                <property name="initStepSize" class="ptolemy.data.expr.Parameter" value="0.01">
                </property>
                <property name="minStepSize" class="ptolemy.data.expr.Parameter" value="1.0E-3">
                </property>
                <property name="maxStepSize" class="ptolemy.data.expr.Parameter" value="0.05">
                </property>
                <property name="maxIterations" class="ptolemy.data.expr.Parameter" value="20">
                </property>
                <property name="errorTolerance" class="ptolemy.data.expr.Parameter" value="1.0E-4">
                </property>
                <property name="valueResolution" class="ptolemy.data.expr.Parameter" value="1.0E-6">
                </property>
                <property name="timeResolution" class="ptolemy.data.expr.Parameter" value="1.0E-10">
                </property>
                <property name="ODESolver" class="ptolemy.data.expr.Parameter" value="&quot;ptolemy.domains.ct.kernel.solver.ExplicitRK23Solver&quot;">
                </property>
                <property name="breakpointODESolver" class="ptolemy.data.expr.Parameter" value="&quot;ptolemy.domains.ct.kernel.solver.DerivativeResolver&quot;">
                </property>
                <property name="_location" class="ptolemy.moml.Location" value="77.0, 39.0">
                </property>
            </property>
            <property name="_location" class="ptolemy.moml.Location" value="264.0, 245.0">
            </property>
            <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[604, 454]">
            </property>
            <property name="_vergilLocation" class="ptolemy.actor.gui.LocationAttribute" value="[102, 100]">
            </property>
            <port name="input" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_location" class="ptolemy.moml.Location" value="57.999999999999986, 184.0">
                </property>
            </port>
            <port name="output" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_location" class="ptolemy.moml.Location" value="502.0, 242.0">
                </property>
            </port>
            <port name="state" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_location" class="ptolemy.moml.Location" value="278.0, 151.0">
                </property>
            </port>
            <port name="trig" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_location" class="ptolemy.moml.Location" value="504.0, 307.0">
                </property>
            </port>
            <entity name="Hold" class="ptolemy.domains.ct.lib.ZeroOrderHold">
                <property name="_location" class="ptolemy.moml.Location" value="129.0, 129.0">
                </property>
                <port name="input" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                </port>
                <port name="output" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                </port>
            </entity>
            <entity name="Integrator" class="ptolemy.domains.ct.lib.Integrator">
                <property name="initialState" class="ptolemy.data.expr.Parameter" value="-1.110223025E-16">
                </property>
                <property name="_location" class="ptolemy.moml.Location" value="152.0, 228.0">
                </property>
                <port name="input" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                </port>
                <port name="output" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                </port>
            </entity>
            <entity name="ZD" class="ptolemy.domains.ct.lib.ZeroCrossingDetector">
                <property name="errorTolerance" class="ptolemy.data.expr.Parameter" value="1.0E-4">
                </property>
                <property name="_location" class="ptolemy.moml.Location" value="412.0, 237.0">
                </property>
                <port name="input" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                </port>
                <port name="output" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                </port>
                <port name="trigger" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                </port>
            </entity>
            <entity name="EXPRESSION" class="ptolemy.actor.lib.Expression">
                <property name="expression" class="ptolemy.data.expr.Parameter" value="in - 0.2">
                </property>
                <property name="_location" class="ptolemy.moml.Location" value="291.0, 302.0">
                </property>
                <port name="output" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                </port>
                <port name="in" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                </port>
            </entity>
            <relation name="_R0" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="_R1" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="R2" class="ptolemy.actor.TypedIORelation">
                <vertex name="vertex0" class="ptolemy.moml.Vertex" value="362.0, 307.0">
                </vertex>
            </relation>
            <relation name="_R2" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="CTIncR1" class="ptolemy.actor.TypedIORelation">
                <vertex name="vertex0" class="ptolemy.moml.Vertex" value="229.0, 234.0">
                </vertex>
            </relation>
            <link port="input" relation="_R0"/>
            <link port="output" relation="_R2"/>
            <link port="state" relation="CTIncR1"/>
            <link port="trig" relation="R2"/>
            <link port="Hold.input" relation="_R0"/>
            <link port="Hold.output" relation="_R1"/>
            <link port="Integrator.input" relation="_R1"/>
            <link port="Integrator.output" relation="CTIncR1"/>
            <link port="ZD.input" relation="CTIncR1"/>
            <link port="ZD.output" relation="_R2"/>
            <link port="ZD.trigger" relation="R2"/>
            <link port="EXPRESSION.output" relation="R2"/>
            <link port="EXPRESSION.in" relation="CTIncR1"/>
        </entity>
        <entity name="Decreasing" class="ptolemy.domains.ct.kernel.CTCompositeActor">
            <property name="CTDecDir" class="ptolemy.domains.ct.kernel.CTEmbeddedDirector">
                <property name="startTime" class="ptolemy.data.expr.Parameter" value="0.0">
                </property>
                <property name="stopTime" class="ptolemy.data.expr.Parameter" value="1.797693135E308">
                </property>
                <property name="initStepSize" class="ptolemy.data.expr.Parameter" value="0.01">
                </property>
                <property name="minStepSize" class="ptolemy.data.expr.Parameter" value="1.0E-3">
                </property>
                <property name="maxStepSize" class="ptolemy.data.expr.Parameter" value="0.05">
                </property>
                <property name="maxIterations" class="ptolemy.data.expr.Parameter" value="20">
                </property>
                <property name="errorTolerance" class="ptolemy.data.expr.Parameter" value="1.0E-4">
                </property>
                <property name="valueResolution" class="ptolemy.data.expr.Parameter" value="1.0E-6">
                </property>
                <property name="timeResolution" class="ptolemy.data.expr.Parameter" value="1.0E-10">
                </property>
                <property name="ODESolver" class="ptolemy.data.expr.Parameter" value="&quot;ptolemy.domains.ct.kernel.solver.ExplicitRK23Solver&quot;">
                </property>
                <property name="breakpointODESolver" class="ptolemy.data.expr.Parameter" value="&quot;ptolemy.domains.ct.kernel.solver.DerivativeResolver&quot;">
                </property>
                <property name="_location" class="ptolemy.moml.Location" value="81.33332824707031, 50.0">
                </property>
            </property>
            <property name="_location" class="ptolemy.moml.Location" value="260.0, 135.0">
            </property>
            <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[604, 454]">
            </property>
            <property name="_vergilLocation" class="ptolemy.actor.gui.LocationAttribute" value="[102, 100]">
            </property>
            <port name="input" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_location" class="ptolemy.moml.Location" value="48.66666666666666, 216.0">
                </property>
            </port>
            <port name="output" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_location" class="ptolemy.moml.Location" value="512.3333333333333, 246.0">
                </property>
            </port>
            <port name="state" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_location" class="ptolemy.moml.Location" value="329.33333333333326, 190.0">
                </property>
            </port>
            <port name="trig" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_location" class="ptolemy.moml.Location" value="512.3333333333333, 316.0">
                </property>
            </port>
            <entity name="Hold" class="ptolemy.domains.ct.lib.ZeroOrderHold">
                <property name="_location" class="ptolemy.moml.Location" value="108.0, 145.0">
                </property>
                <port name="input" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                </port>
                <port name="output" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                </port>
            </entity>
            <entity name="Integrator" class="ptolemy.domains.ct.lib.Integrator">
                <property name="initialState" class="ptolemy.data.expr.Parameter" value="0.2">
                </property>
                <property name="_location" class="ptolemy.moml.Location" value="189.66666412353516, 232.0">
                </property>
                <port name="input" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                </port>
                <port name="output" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                </port>
            </entity>
            <entity name="Gain" class="ptolemy.actor.lib.Scale">
                <property name="factor" class="ptolemy.data.expr.Parameter" value="-1.0">
                </property>
                <property name="_location" class="ptolemy.moml.Location" value="207.3333282470703, 146.0">
                </property>
                <port name="input" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                </port>
                <port name="output" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                </port>
            </entity>
            <entity name="ZD" class="ptolemy.domains.ct.lib.ZeroCrossingDetector">
                <property name="errorTolerance" class="ptolemy.data.expr.Parameter" value="1.0E-4">
                </property>
                <property name="_location" class="ptolemy.moml.Location" value="418.0, 241.0">
                </property>
                <port name="input" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                </port>
                <port name="output" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                </port>
                <port name="trigger" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                </port>
            </entity>
            <entity name="EXPRESSION" class="ptolemy.actor.lib.Expression">
                <property name="expression" class="ptolemy.data.expr.Parameter" value="in + 0.0">
                </property>
                <property name="_location" class="ptolemy.moml.Location" value="320.3333435058594, 311.0">
                </property>
                <port name="output" class="ptolemy.actor.TypedIOPort">
                    <property name="output"/>
                </port>
                <port name="in" class="ptolemy.actor.TypedIOPort">
                    <property name="input"/>
                </port>
            </entity>
            <relation name="_R0" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="_R1" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="_R2" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="R2" class="ptolemy.actor.TypedIORelation">
                <vertex name="vertex0" class="ptolemy.moml.Vertex" value="376.66666666666663, 316.0">
                </vertex>
            </relation>
            <relation name="_R3" class="ptolemy.actor.TypedIORelation">
            </relation>
            <relation name="CTDecR1" class="ptolemy.actor.TypedIORelation">
                <vertex name="vertex0" class="ptolemy.moml.Vertex" value="265.0, 238.0">
                </vertex>
            </relation>
            <link port="input" relation="_R0"/>
            <link port="output" relation="_R3"/>
            <link port="state" relation="CTDecR1"/>
            <link port="trig" relation="R2"/>
            <link port="Hold.input" relation="_R0"/>
            <link port="Hold.output" relation="_R1"/>
            <link port="Integrator.input" relation="_R2"/>
            <link port="Integrator.output" relation="CTDecR1"/>
            <link port="Gain.input" relation="_R1"/>
            <link port="Gain.output" relation="_R2"/>
            <link port="ZD.input" relation="CTDecR1"/>
            <link port="ZD.output" relation="_R3"/>
            <link port="ZD.trigger" relation="R2"/>
            <link port="EXPRESSION.output" relation="R2"/>
            <link port="EXPRESSION.in" relation="CTDecR1"/>
        </entity>
        <relation name="HSr1" class="ptolemy.actor.TypedIORelation">
            <vertex name="vertex0" class="ptolemy.moml.Vertex" value="145.0, 200.0">
            </vertex>
        </relation>
        <relation name="HSr2" class="ptolemy.actor.TypedIORelation">
            <vertex name="vertex0" class="ptolemy.moml.Vertex" value="370.0, 130.0">
            </vertex>
        </relation>
        <relation name="HSr3" class="ptolemy.actor.TypedIORelation">
            <vertex name="vertex0" class="ptolemy.moml.Vertex" value="341.0, 251.0">
            </vertex>
        </relation>
        <relation name="HSr4" class="ptolemy.actor.TypedIORelation">
        </relation>
        <link port="input" relation="HSr1"/>
        <link port="state" relation="HSr3"/>
        <link port="Controller.output" relation="HSr2"/>
        <link port="Controller.state" relation="HSr3"/>
        <link port="Increasing.input" relation="HSr1"/>
        <link port="Increasing.output" relation="HSr2"/>
        <link port="Increasing.state" relation="HSr3"/>
        <link port="Increasing.trig" relation="HSr4"/>
        <link port="Decreasing.input" relation="HSr1"/>
        <link port="Decreasing.output" relation="HSr2"/>
        <link port="Decreasing.state" relation="HSr3"/>
        <link port="Decreasing.trig" relation="HSr4"/>
    </entity>
    <relation name="_R0" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="_R1" class="ptolemy.actor.TypedIORelation">
    </relation>
    <link port="Const.output" relation="_R0"/>
    <link port="plot.input" relation="_R1"/>
    <link port="HS.input" relation="_R0"/>
    <link port="HS.state" relation="_R1"/>
</entity>
