<!-- $Id$ -->
<html>
<head>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
<title>Ptolemy II</title>
<link href="../../../../doc/default.css" rel="stylesheet" type="text/css">
</head>
<body>
<h1>GR</h1>


The GR domain is an experimental domain designed for three dimensional
graphical animations. It is an untimed domain with particular
optimizations aimed at reducing recomputations of scene graph components.
A model consists of a set of three dimensional graphical elements, such
as spheres, cylinders, etc., composed and transformed to form a scene
graph. It is particularly interesting and useful to couple this domain
with others, where the other domains provide the transformations for
the graphical elements. For example, a model of a physical system might be
constructed in CT and animated in GR.


<h2>Java3D</h2>
The GR domain demos require Java3D, which can be installed 
 <!-- #in_browser causes HTMLViewer to spawn a separate browser -->

 from
<a href="http://java.sun.com/products/java-media/3D/#in_browser" target="_top"><CODE>http://java.sun.com/products/java-media/3D/</CODE></a>.

You need not install Java3D if you are not planning on using GR domain.

 <p>If you plan on recompiling the GR domain, then install the Java 3D SDK
and runtime.  If you plan on only running the GR domain demos, then
installing only the Java 3D runtime should be sufficient.
We have verified the demos with the Java 3D 1.2.1_04 SDK (DirectX Version).

<p>Note that JDK1.4.0 requires Java 3D 1.2.1_04.  If you run
with Java 3D 1.2.1_03 and JDK1.4.0, the GR demos will fail to initialize
and you will see the message:
<pre>
Fail to create back buffer - DDERR_INALIDPARAM
</pre>
The Java 3D 1.2.1_04 release notes say that this bug:
<pre>
4470749 Java3D fail to initialize underlying OGL/D3D library in jdk1.4
</pre>
was fixed in Java 3D 1.2.1_04

 <p>If you are running Ptolemy II under Web Start, see
<a href="../../../../doc/webStartHelp.htm#Java3D">Installing Java 3D for use with Web Start</a>

<h2>Java 3D in applets </h2>
Java 3D can be run inside a browser.  Under Windows, see
<a href="file:///C|/jdk1.3/demo/java3d/index.html"><code>file:///C|/jdk1.3/demo/java3d/index.html</code></a>

<h3>Resources</h3>
<menu>
<li> <a href="../../../../doc/troubleshooting.htm#plugin">Ptolemy II Plugin troubleshooting guide</a>
<li> See also the Java 3D FAQ question <a href="http://java.sun.com/products/java-media/3D/java3dfaq-1.3.html#browser" target="_top">What do I have to do so that Java 3D will run from by browser?</a>

</menu>
<h3>Running Java 3D Applets under Windows</h3>

<ol>
<li>Install Java 3D from
 <!-- #in_browser causes HTMLViewer to spawn a separate browser -->
<a href="http://java.sun.com/products/java-media/3D/#in_browser" target="_top"><CODE>http://java.sun.com/products/java-media/3D/</CODE></a>.

<li> Enable the Java Plug-in console window by going to
<CODE>Start</CODE> -&gt; <CODE>Settings</CODE> -&gt;
<CODE>Control Panel</CODE> -&gt; <CODE>Java Plug-in</CODE>
and restarting your browser.

<li> Goto <a href="file:///C|/jdk1.3/demo/java3d/index.html"><code>file:///C|/jdk1.3/demo/java3d/index.html</code></a> and run the HelloUniverse demo

<li>If the demo fails to run, look in the Java Plugin console window.
If you get a message like
<pre>
java.lang.NoClassDefFoundError: javax/media/j3d/SceneGraphObject
</pre>
Then be sure that the Java 3D jar files (j3daudio.jar, j3dcore.jar,
j3dutils.jar,vecmath.jar) are located in the lib/ext directory for the plugin.

<br>The plugin is usually located in <code>c:/Program Files/javasoft/JRE</code>
and in theory the Java 3D installation should place the jar files, but
you may need to copy them by hand.

<pre>
cp c:/jdk1.3/jre/lib/ext/*  c:/Program\ Files/javasoft/JRE/1.3.0_01/lib/ext
</pre>
You may also need to copy <code>J3D.dll</code>
<pre>
cp c:/jdk1.3/jre/bin/J3D.dll  c:/Program\ Files/javasoft/JRE/1.3.0_01/bin
</pre>
</ol>
</body>
</html>
