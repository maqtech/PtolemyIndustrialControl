<!-- $Id$ -->
<html>
<head>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
<title>Installing Ptplot</title>
<link href="../../../doc/default.css" rel="stylesheet" type="text/css">
</head>
<body>
<h1>Installing Ptplot</h1>
<h2>Ptplot Installation under Unix or Windows with Cygwin</h2>

Ptplot is shipped with the java files precompiled, so you need not
recompile.  However, if you are using the standalone scripts such as
<CODE>ptplot</CODE>, then you may want to go through the installation
procedure so that the standalone scripts are properly localized.


 <p> If you are using Windows and you want to rebuild Ptplot or
localize the standalone scripts, then you will need to install the
Cygwin toolkit from
<a href="http://sourceware.cygnus.com/cygwin/"><CODE>http://sourceware.cygnus.com/cygwin/</CODE></a>
so that you can run <CODE>/bin/sh</CODE> and <CODE>make</CODE>.

 <p>Below are the installation instructions for Unix and Windows
with Cygwin
<ol>
<li> Be sure that JDK1.2 is installed, and that <CODE>javac</CODE> 
is in your path.

<li> Set the <CODE>PTII</CODE> environment variable to point
to the top of the Ptplot tree.  Under C-shell, one would do:
<pre>
setenv PTII ~/src/ptplot3.1
</pre>

<li> cd into the <CODE>PTII</CODE> directory:
<pre>
cd $PTII
</pre>

<li> Run <CODE>configure</CODE>
<pre>
./configure
</pre>


<li> Run make
<pre>
make
</pre>


<li> View the applets by going to
<a href="index.htm">ptolemy/plot/doc/index.htm</a>


</ol>

<h3>How does configure work?</h3>
<CODE>configure</CODE> is a <CODE>/bin/sh</CODE> script
that determines some information about your environment and
then modifies a few files.

When the <a href="../../../configure"><CODE>configure</CODE></a>
 script is run, it reads in 
<a href="../../../mk/ptII.mk.in"><CODE>mk/ptII.mk.in</CODE></a>
and
<a href="../ptplot.in"><CODE>ptolemy/plot/ptplot.in</CODE></a>

generates 
<a href="../../../mk/ptII.mk.in"><CODE>mk/ptII.mk</CODE></a>
and
<a href="../ptplot">ptolemy/plot/ptplot</a>

 <p>To get help with <CODE>configure</CODE>, try
<pre>
./configure --help
</pre>


 <p> <CODE>configure</CODE> reads in the <CODE>.in</CODE> files
and substitutes strings inside the <CODE>@</CODE>
 <p>For example, <CODE>configure</CODE> reads in
<a href="../ptplot.in"><CODE>ptolemy/plot/ptplot.in</CODE></a>
and
<pre>
PTII_DEFAULT=@PTII_DEFAULT@
PTJAVA_DIR=@PTJAVA_DIR@
</pre>

becomes
<pre>
PTII_DEFAULT=/users/cxh/ptII
PTJAVA_DIR=/usr/java1.1
</pre>

<h2>Rebuilding under Windows without Cygwin</h2>
Below are the instructions for recompiling the Java files
if you are under Windows and you do not have the Cygwin.

<ol>

<li> Set the <CODE>PTII</CODE> variable to the top-level
directory of the Ptplot tree.
<pre>
C:\ptplot3.1&gt; PTII=c:\ptplot3.1
</pre>
<CODE>PTII</CODE> is used by the standalone <CODE>ptplot.bat</CODE>
script and other scripts

<li> To compile the Ptplot Java classes, they must be in the directory
ptolemy\plot.
<CODE></CODE>
<pre>
C:\ptplot3.1&gt; cd ptolemy\plot
</pre>


<li> set your CLASSPATH to ..\..
<pre>
C:\ptplot3.1\ptolemy\plot&gt;set CLASSPATH=..\..
C:\ptplot3.1\ptolemy\plot&gt;echo %CLASSPATH%
..\..
</pre>

<li> Remove the old Java files and compile them
<pre>
C:\ptplot3.1\ptolemy\plot&gt;del  *.java *\*.java
C:\ptplot3.1\ptolemy\plot&gt;javac *.java
</pre>

<li> Run <CODE>ptplot.bat</CODE>, which reads <CODE>%PTII%</CODE>
<pre>
C:\ptplot3.1\ptolemy\plot&gt;ptplot.bat
</pre>

</ol>


<h2>Installing Ptplot as an applet</h2>
Ptplot includes several jar files, which are collections of 
Java <CODE>.class</CODE> files
<dl>

<dt> <CODE>plotapplet.jar</CODE>
<dd>  .class files necessary for simple JDK1.1 
browser applets - no pxgraph, no plotml.

<dt> <CODE>pxgraphapplet.jar</CODE>
<dd> .class files necessary for simple JDK1.1 
browser applets with pxgraph classes, no plotml.
Applets that use the <CODE>pxgraphargs</CODE> applet parameter
should use this jar file.

<dt> <CODE>plotmlapplet.jar</CODE>
<dd> .class files necessary for PlotML applets -
includes com/microstar/xml and the plotml code, but does not include pxgraph,
or PlotFrame.

<dt> <CODE>plot.jar</CODE>

<dd> The standard Ptolemy II jar file that includes the
ptolemy/plot/*.class files and the class files in plotml and compat.
Does not include com/microstar/xml or ptolemy/gui.
<CODE>plot.jar</CODE> is used by the Ptolemy II build system.

<dt> <CODE>plotapplication.jar</CODE>

<dd> .class files necessary for standalone applications - includes
com/microstar/xml, ptolemy/gui and the plotml code, but does not
include pxgraph.  If <CODE>plotapplication.jar</CODE> is
present, then it is used by the standalone scripts (<CODE>ptplot</CODE> etc.)

</dl>

The best way to use Ptplot as an applet is to copy the appropriate
<CODE>*applet.jar</CODE> file into the same directory as your applet,
and then to use the <CODE>archive</CODE> applet directive.
For examples of applet html code, see the demonstrations.


<h2>Installing Ptplot as an application</h2>

Under Unix and Windows with the Cygwin toolkit,
 ptplot can be run as three standalone applications:
<menu>
<li> <CODE>ptplot</CODE> - A modern plot application that
with a menubar and such.
<li> <CODE>histogram</CODE> - A histogram plot application
<li> <CODE>pxgraph</CODE> - A plot application that 
is mostly backward compatible with the older X11 <CODE>pxgraph</CODE>
program
</menu>

When configure is run, it substitutes variables inside <CODE>ptplot.in</CODE>
and produced <CODE>ptplot</CODE>.  The <CODE>ptplot</CODE> script
is shared between the standalone applications, <CODE>ptplot</CODE>
determines what name it was called with, and selects the appropriate
class accordingly.

 <p>If the <CODE>ptplot</CODE> script is run,
then <CODE>ptolemy.plot.PlotApplication</CODE> is run

 <p>If the <CODE>ptplot</CODE> script is copied to <CODE>histogram</CODE>,
then <CODE>ptolemy.plot.plotml.HistogramMLApplication</CODE> is run

 <p>If the <CODE>ptplot</CODE> script is copied to <CODE>pxgraph</CODE>,
then <CODE>ptolemy.plot.compat.PxgraphApplication</CODE> is run

 <p>Under Unix, you can use a hard link to create the histogram and 
pxgraph script:
<pre>
ln ptplot histogram
ln ptplot pxgraph
</pre>

 <p>Under Windows, three .bat scripts are provided:
<CODE>ptplot.bat</CODE>, <CODE>histogram.bat</CODE> and 
<CODE>pxgraph.bat</CODE>

<p><font size="2" color="#cc0000">Last Updated: $Date$</font>
</body>
</html>
