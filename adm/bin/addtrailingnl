#!/bin/sh
# $Id$
# Add a trailing newline
# Usage: addtrailingnl file [file2 . . .]
tmpfile=/tmp/addtrailingnl.$$ 

nlfile=/tmp/addtrailingnl_nlfile.$$
echo "foo" | awk '{printf("\n")}' > $nlfile

files=$@
for file in $files
do
    #echo "$0: $file"
    results=`tail -1 $file | od -bv | tail -2 |head -1 | grep '012$'`
    if [ "x$results" = "x" ]; then
	#echo "$file: does not have a trailing newline, adding one now."
	#cvs annotate $file | tail -1
	cat  $file $nlfile > $tmpfile
        cp $tmpfile $file
    fi
done
rm -f $tmpfile $nlfile
